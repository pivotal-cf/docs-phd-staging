
<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <!-- REPLACE X WITH PRODUCT NAME -->
  <title>Upgrade Checklist | Pivotal Docs</title>
    <!-- Local CSS stylesheets -->
    <link href="/stylesheets/master.css" media="screen,print" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/breadcrumbs.css" media="screen,print" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/search.css" media="screen,print" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/portal-style.css" media="screen,print" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/printable.css" media="print" rel="stylesheet" type="text/css" /> 
    <!-- Confluence HTML stylesheet -->
    <link href="/stylesheets/site-conf.css" media="screen,print" rel="stylesheet"  type="text/css" /> 
    <!-- Left-navigation code -->
    <!-- http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/examples/# -->
    <link href="/stylesheets/dcaccordion.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.cookie.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.hoverIntent.minified.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.dcjqaccordion.2.7.min.js" type="text/javascript"></script>
    <script type="text/javascript">
                    $(document).ready(function($){
					$('#accordion-1').dcAccordion({
						eventType: 'click',
						autoClose: true,
						saveState: true,
						disableLink: false,
						speed: 'fast',
						classActive: 'test',
						showCount: false
					});
					});
        </script>
    <link href="/stylesheets/grey.css" rel="stylesheet" type="text/css" /> 
    <!-- End left-navigation code -->
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <link href='http://www.gopivotal.com/misc/favicon.ico' rel='shortcut icon'>
    <script type="text/javascript">
    if (window.location.host === 'docs.gopivotal.com') {
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-39702075-1']);
        _gaq.push(['_setDomainName', 'gopivotal.com']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    }
  </script>
</head>

<body class="pivotalcf pivotalcf_getstarted pivotalcf_getstarted_index">
  <div class="viewport">
    <div class="mobile-navigation--wrapper mobile-only">
      <div class="navigation-drawer--container">
        <div class="navigation-item-list">
          <div class="navbar-link active">
            <a href="http://gopivotal.com">
              Home
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/paas">
              PaaS
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/big-data">
              Big Data
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/agile">
              Agile
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/support">
              Help &amp; Support
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/products">
              Products
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/solutions">
              Solutions
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="http://gopivotal.com/partners">
              Partners
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="mobile-nav">
        <div class="nav-icon js-open-nav-drawer">
          <i class="icon-reorder"></i>
        </div>
        <div class="header-center-icon">
          <a href="http://gopivotal.com">
            <div class="icon icon-pivotal-logo-mobile"></div>
          </a>
        </div>
      </div>
    </div>

    <div class='wrap'>
      <script src="//use.typekit.net/clb0qji.js" type="text/javascript"></script>
      <script type="text/javascript">
          try {
              Typekit.load();
          } catch (e) {
          }
      </script>
      <script type="text/javascript">
          document.domain = "gopivotal.com";
      </script>

	<script type="text/javascript">
	  WebFontConfig = {
	    google: { families: [ 'Source+Sans+Pro:300italic,400italic,600italic,300,400,600:latin' ] }
	  };
	  (function() {
	    var wf = document.createElement('script');
	    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
	      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	    wf.type = 'text/javascript';
	    wf.async = 'true';
	    var s = document.getElementsByTagName('script')[0];
	    s.parentNode.insertBefore(wf, s);
	  })(); </script>

      <div id="search-dropdown-box">
        <div class="search-dropdown--container js-search-dropdown">
          <div class="container-fluid">
            <div class="close-menu-large"><img src="http://www.gopivotal.com/sites/all/themes/gopo13/images/icon-close.png" /></div>
            <div class="search-form--container">
              <div class="form-search">
                <div class='gcse-search'></div>
                <script src="http://www.google.com/jsapi" type="text/javascript"></script>
                <script src="/javascripts/cse.js" type="text/javascript"></script>
              </div>
            </div>
          </div>
        </div>
      </div>

      <header class="navbar desktop-only" id="nav">
        <div class="navbar-inner">
            <div class="container-fluid">
                <div class="pivotal-logo--container">
                    <a class="pivotal-logo" href="http://gopivotal.com"><span></span></a>
                </div>

                <ul class="nav pull-right">
                    <li class="navbar-link">
                        <a href="http://www.gopivotal.com/paas" id="paas-nav-link">PaaS</a>
                    </li>
                    <li class="navbar-link">
                        <a href="http://www.gopivotal.com/big-data" id="big-data-nav-link">BIG DATA</a>
                    </li>
                    <li class="navbar-link">
                        <a href="http://www.gopivotal.com/agile" id="agile-nav-link">AGILE</a>
                    </li>
                    <li class="navbar-link">
                        <a href="http://www.gopivotal.com/oss" id="oss-nav-link">OSS</a>
                    </li>
                    <li class="nav-search">
                        <a class="js-search-input-open" id="click-to-search"><span></span></a>
                    </li>
                </ul>
            </div>
            <a href="http://www.gopivotal.com/contact">
                <img id="get-started" src="http://www.gopivotal.com/sites/all/themes/gopo13/images/get-started.png">
            </a>
        </div>
      </header>
      <div class="main-wrap">
        <div class="container-fluid">

          <!-- Google CSE Search Box -->
          <div id='docs-search'>
              <gcse:search></gcse:search>
          </div>
          
          <div id='all-docs-link'>
            <a href="http://docs.gopivotal.com/">All Documentation</a>
          </div>
          
          <div class="container">
            <div id="sub-nav" class="nav-container">              
              
              <!-- Collapsible left-navigation-->
				<ul class="accordion"  id="accordion-1">
					<!-- REPLACE <li/> NODES-->
                        <li>
                <a href="index.html">Home</a></br>
                                
                        <li>
                <a href="PivotalHD.html">Pivotal HD 2.0.1</a>

                            <ul>
                    <li>
                <a href="PHDEnterprise2.0.1ReleaseNotes.html">PHD Enterprise 2.0.1 Release Notes</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PHDInstallationandAdministration.html">PHD Installation and Administration</a>

                            <ul>
                    <li>
                <a href="OverviewofPHD.html">Overview of PHD</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="InstallationOverview.html">Installation Overview</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PHDInstallationChecklist.html">PHD Installation Checklist</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="InstallingPHDUsingtheCLI.html">Installing PHD Using the CLI</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="UpgradeChecklist.html">Upgrade Checklist</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="UpgradingPHDUsingtheCLI.html">Upgrading PHD Using the CLI</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="AdministeringPHDUsingtheCLI.html">Administering PHD Using the CLI</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PHDFAQFrequentlyAskedQuestions.html">PHD FAQ (Frequently Asked Questions)</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PHDTroubleshooting.html">PHD Troubleshooting</a>

                    </li>
            </ul>
            </li>
            </ul>
                    <ul>
                    <li>
                <a href="StackandToolsReference.html">Stack and Tools Reference</a>

                            <ul>
                    <li>
                <a href="OverviewofApacheStackandPivotalComponents.html">Overview of Apache Stack and Pivotal Components</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="ManuallyInstallingPivotalHD2.0Stack.html">Manually Installing Pivotal HD 2.0 Stack</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="ManuallyUpgradingPivotalHDStackfrom1.1.1to2.0.html">Manually Upgrading Pivotal HD Stack from 1.1.1 to 2.0</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PivotalHadoopEnhancements.html">Pivotal Hadoop Enhancements</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="Security.html">Security</a>

                    </li>
            </ul>
            </li>
            </ul>
            </li>
                        <li>
                <a href="PivotalCommandCenter.html">Pivotal Command Center 2.2.1</a>

                            <ul>
                    <li>
                <a href="PCC2.2.1ReleaseNotes.html">PCC 2.2.1 Release Notes</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PCCUserGuide.html">PCC User Guide</a>

                            <ul>
                    <li>
                <a href="PCCOverview.html">PCC Overview</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PCCInstallationChecklist.html">PCC Installation Checklist</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="InstallingPCC.html">Installing PCC</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="UsingPCC.html">Using PCC</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="CreatingaYUMEPELRepository.html">Creating a YUM EPEL Repository</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="CommandLineReference.html">Command Line Reference</a>

                    </li>
            </ul>
            </li>
            </ul>
            </li>
                        <li>
                <a href="PivotalHAWQ.html">Pivotal HAWQ 1.2.0</a>

                            <ul>
                    <li>
                <a href="HAWQ1.2.0.1ReleaseNotes.html">HAWQ 1.2.0.1 Release Notes</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQInstallationandUpgrade.html">HAWQ Installation and Upgrade</a>

                            <ul>
                    <li>
                <a href="PreparingtoInstallHAWQ.html">Preparing to Install HAWQ</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="InstallingHAWQ.html">Installing HAWQ</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="InstallingtheHAWQComponents.html">Installing the HAWQ Components</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="UpgradingHAWQandComponents.html">Upgrading HAWQ and Components</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQConfigurationParameterReference.html">HAWQ Configuration Parameter Reference</a>

                    </li>
            </ul>
            </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQAdministration.html">HAWQ Administration</a>

                            <ul>
                    <li>
                <a href="HAWQOverview.html">HAWQ Overview</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQQueryProcessing.html">HAWQ Query Processing</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="UsingHAWQtoQueryData.html">Using HAWQ to Query Data</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="ConfiguringClientAuthentication.html">Configuring Client Authentication</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="KerberosAuthentication.html">Kerberos Authentication</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="ExpandingtheHAWQSystem.html">Expanding the HAWQ System</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQInputFormatforMapReduce.html">HAWQ InputFormat for MapReduce</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQFilespacesandHighAvailabilityEnabledHDFS.html">HAWQ Filespaces and High Availability Enabled HDFS</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="SQLCommandReference.html">SQL Command Reference</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="ManagementUtilityReference.html">Management Utility Reference</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="ClientUtilityReference.html">Client Utility Reference</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQServerConfigurationParameters.html">HAWQ Server Configuration Parameters</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQEnvironmentVariables.html">HAWQ Environment Variables</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="HAWQDataTypes.html">HAWQ Data Types</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="SystemCatalogReference.html">System Catalog Reference</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="hawq_toolkitReference.html">hawq_toolkit Reference</a>

                    </li>
            </ul>
            </li>
            </ul>
                    <ul>
                    <li>
                <a href="PivotalExtensionFrameworkPXF.html">Pivotal Extension Framework (PXF)</a>

                            <ul>
                    <li>
                <a href="PXFInstallationandAdministration.html">PXF Installation and Administration</a>

                    </li>
            </ul>
                    <ul>
                    <li>
                <a href="PXFExternalTableandAPIReference.html">PXF External Table and API Reference</a>

                    </li>
            </ul>
            </div><!--end of sub-nav-->
            
            <h3 class="title-container">Upgrade Checklist</h3>
            <div class="content">
              <!-- Python script replaces main content -->
			  <div id ="main"><div style="visibility:hidden; height:2px;">Pivotal Product Documentation : Upgrade Checklist</div><div class="wiki-content group" id="main-content">
<p>This section is intended to assist you in planning and performing your PHD upgrade.  It includes a upgrade prerequisite checklist and a brief summary of the upgrade steps. This section is intended for more advanced users; first time users should following the more detailed instructions we provide in <a href="UpgradingPHDUsingtheCLI.html">Upgrading PHD Using the CLI</a>.</p><p>You can find more detailed instructions for upgrading your system in <a href="UpgradingPHDUsingtheCLI.html">Upgrading PHD Using the CLI</a>.</p><h3 id="UpgradeChecklist-Prerequisites">Prerequisites</h3><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh" colspan="1">Step</th><th class="confluenceTh">Task</th><th class="confluenceTh">Description</th><th class="confluenceTh">Completed</th></tr><tr><td class="confluenceTd" colspan="1">1</td><td class="confluenceTd"><p><strong>PADS file location</strong></p></td><td class="confluenceTd">If you are upgrading PADS, make note of the path to the extracted pre-upgrade PADS tar ball. If you don't remember, you can just download it again and untar it.</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd" colspan="1">2</td><td class="confluenceTd"><p><strong>Backup Data</strong></p></td><td class="confluenceTd">We recommend that you backup any critical data before running any upgrade.</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd" colspan="1">3</td><td class="confluenceTd"><strong>Backup Service  Configuration File(s)</strong></td><td class="confluenceTd">Backup the configuration files of any services you will be manually reconfiguring, post CLI-upgrade.</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd" colspan="1">4</td><td class="confluenceTd" colspan="1"><strong>JDK 1.7</strong></td><td class="confluenceTd" colspan="1"><p>Make sure you are running JDK 1.7. If you are not, download it from Oracle.</p> <div class="aui-message warning shadowed information-macro">
<span class="aui-icon icon-warning">Icon</span>
<div class="message-content">
<p>That this is a new requirement; prior to PHD 2.0, JDK 1.6 was also supported.</p>
</div>
</div>
</td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">5</td><td class="confluenceTd" colspan="1"><strong>Compact HBase Tables</strong></td><td class="confluenceTd" colspan="1">Hbase 0.96 only supports HFileV2 and compacting tables rewrites HFileV1 format to HFileV2<strong>.</strong></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">6</td><td class="confluenceTd" colspan="1"><strong>GemFireXD</strong></td><td class="confluenceTd" colspan="1"><p>The PHD 2.0 upgrade does not support and upgrade of the GemFireXD service.</p><p>You will have to remove the GemFireXD beta service prior to PHD upgrade; followed by a fresh install of GemFireXD. Data migration from GemfireXD beta is not supported.</p></td><td class="confluenceTd" colspan="1"> </td></tr></tbody></table></div><h3 id="UpgradeChecklist-UpgradeSteps">Upgrade Steps</h3><p>The table below briefly describes the steps you need to take to upgrade a cluster; more detailed instructions are provided in <a href="UpgradingPHDUsingtheCLI.html">Upgrading PHD Using the CLI</a>:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh" colspan="1">Step</th><th class="confluenceTh"><div class="tablesorter-header-inner">Task</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Details</div></th><th class="confluenceTh" colspan="1">Completed</th></tr><tr><td class="confluenceTd" colspan="1">1</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-VerifyState">Verify the state of your cluster</a></td><td class="confluenceTd" colspan="1">Make sure your cluster is healthy and in a consistent state.<br/><p>Run <code>hdfs dfsadmin -report</code></p><p>Run <code>fsck</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">2</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-BackupHive">Back up Hive metastore</a></td><td class="confluenceTd" colspan="1"><p>Login to the machine running the hive metastore database, then run:</p><pre>pg_dump -U hive -p 10432 metastore &gt; hive_metastore_1.backup</pre></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">3</td><td class="confluenceTd" colspan="1">Revert to Non-High Availability</td><td class="confluenceTd" colspan="1"><p>If High Availability is enabled, disable it before you begin your upgrade.  See <a href="AdministeringPHDUsingtheCLI.html#AdministeringPHDUsingtheCLI-DisableHA">Disabling High Availability on a Cluster</a> for instructions.</p><p>To complete this step, run the following SQL command:</p><p><code>psql -U postgres -p 10432 gphdmgr -c "UPDATE cluster_properties SET property_value='false' WHERE &lt;cluster_id&gt;=2 AND property_name='cluster.nn.isHAEnabled';"</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">4</td><td class="confluenceTd" colspan="1">Revert to Non-Secure</td><td class="confluenceTd" colspan="1"><p>If security is enabled, disable it before you begin your upgrade. See <a href="AdministeringPHDUsingtheCLI.html#AdministeringPHDUsingtheCLI-DisableKerberos">Disabling Security on a Cluster</a> for instructions.</p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">5</td><td class="confluenceTd" colspan="1">Remove Standby HAWQ master</td><td class="confluenceTd" colspan="1"><p>Remove Standby HAWQ master:</p><p>Source the <code>greenplum_path.sh</code>:</p><p><code>$ source /usr/local/hawq/greenplum.path.sh</code></p><p>Then, as <code>gpadmin</code>, run:</p><p><code>$ gpinitstandby -r</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">6</td><td class="confluenceTd" colspan="1">Stop Services</td><td class="confluenceTd" colspan="1"><p>Stop HAWQ (if applicable):</p><p><code> $ /etc/init.d/hawq stop </code></p><p>(See<a href="AdministeringPHDUsingtheCLI.html#AdministeringPHDUsingtheCLI-ManagingHAWQ"> Managing HAWQ</a> for details.)</p><p>As <code>gpadmin</code>, stop all PHD services :</p><p><code> $ icm_client stop -l &lt;CLUSTER NAME&gt; </code></p><p>(See <a href="AdministeringPHDUsingtheCLI.html#AdministeringPHDUsingtheCLI-ManagingACluster"> Managing a Cluster</a> for details.)</p><p>As <code>root</code>, stop PCC:</p><p><code>$ service commander stop</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">7</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-ExtractCC">Import and Upgrade PCC</a></td><td class="confluenceTd" colspan="1"><p>Untar the new PCC package, then run (as <code>root</code>):</p><p><code>$ ./install</code></p><p>Change the user to <code>gpadmin</code> for the rest of the upgrade<code> <br/> </code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">8</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-SelfUpgrade">CLI Self Upgrade</a></td><td class="confluenceTd" colspan="1"><code>$ icm_client self-upgrade</code></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">9</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-ImportPADS"> Import HAWQ (PADS) </a></td><td class="confluenceTd" colspan="1"><p>Run:</p><p><code>$ icm_client import -s &lt; PATH TO EXTRACTED HAWQ TAR BALL  &gt;<br/> </code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">10</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-UpgradeHAWQ">Upgrade HAWQ (PADS) </a></td><td class="confluenceTd" colspan="1"><p>To upgrade HAWQ run:</p><p><code>$ icm_client upgrade -l &lt;CLUSTERNAME&gt; -s pads -o &lt; PATH TO EXTRACTED OLD ADS TAR BALL &gt; -n &lt; PATH TO EXTRACTED NEW ADS TAR BALL &gt; </code></p><p>Then, to migrate data, on the HAWQ master node, run:</p><pre>gpmigrator &lt;old_HAWQHOME_path&gt; &lt;new_HAWQHOME_path&gt;</pre></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">11</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-ImportPHD">Import PHD</a></td><td class="confluenceTd" colspan="1"><p>Run:</p><p><code>$ icm_client import -s &lt; PATH TO EXTRACTED PHD TAR BALL  &gt;</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">12</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-UpgradePHD">Upgrade PHD</a></td><td class="confluenceTd" colspan="1"><p>PHD 2.0.1 requires Oracle JDK 1.7. Get the JDK rpm (for example: <code>jdk-7u15-linux-x64.rpm</code>) and include it in the upgrade command as shown below, so that the <code>upgrade </code>command can deploy it to the cluster nodes.</p><p><code> <code>$ icm_client upgrade -l &lt;CLUSTERNAME&gt; -s phd</code> -j ~/jdk-7u15-linux-x64.rpm </code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">13</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-PostUpgrade">Upgrade Configuration Files</a></td><td class="confluenceTd" colspan="1"><ol><li>Synchronize configuration files</li><li>Reconfigure the cluster</li></ol> <div class="aui-message warning shadowed information-macro">
<span class="aui-icon icon-warning">Icon</span>
<div class="message-content">
<p>Do not add any security or HA-specific configuration parameters/values at this time, wait until you have completed the upgrade.</p>
</div>
</div>
</td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">14</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-UpgradeHDFS">Upgrade HDFS</a></td><td class="confluenceTd" colspan="1"><ul><li>Backup Name Node data</li><li>Run<code> HdfsUpgrader.py </code>with appropriate options (see<code> <a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-UpgradeHDFS">Upgrade HDFS</a> </code> for details)<code> <br/> </code></li></ul></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">15</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-StopRestart">Restart Cluster</a></td><td class="confluenceTd" colspan="1"><p><code>$ icm_client restart -l &lt;CLUSTER_NAME&gt;</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">16</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-PostUpgradeHAWQ">Post-Upgrade HAWQ</a></td><td class="confluenceTd" colspan="1"><p>Check to see if HAWQ is running, if not, start it now:</p><p><code>$ /etc/init.d/hawq start</code></p><p>Reinitialize HAWQ Standby Master:</p><p><code>$ gpinitstandby -s &lt;standby_hostname&gt;</code></p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">17</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-FinalizeHDFS">Finalize HDFS Upgrade</a></td><td class="confluenceTd" colspan="1">Run <code>FinalizeHDFS</code> command</td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">18</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-FinalizeHBase">Finalize HBase Upgrade</a></td><td class="confluenceTd" colspan="1"><ul><li>Check for HFileV1 data (not supported after upgrade)</li><li>Run HBase upgrade</li></ul></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">19</td><td class="confluenceTd" colspan="1"><a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-Manual">Reconfigure Manually Installed Services</a></td><td class="confluenceTd" colspan="1"><p>Services that were manually installed on an existing cluster are not upgraded by a CLI upgrade. After the PHD upgrade, you need to manually reconfigure these services to work with the upgraded PHD.</p></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">20</td><td class="confluenceTd" colspan="1">Re-enable High Availability</td><td class="confluenceTd" colspan="1">See <a href="AdministeringPHDUsingtheCLI.html#AdministeringPHDUsingtheCLI-EnableHA">Enabling High Availability on a Cluster</a> for details.<strong> <br/> </strong></td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">21</td><td class="confluenceTd" colspan="1">Re-secure Cluster</td><td class="confluenceTd" colspan="1">We provide instructions for manually enabling Kerberos authentication in the <em>PHD 2.0 Stack and Tools Reference Guide</em>.  We also can provide scripts to automate this process. To obtain these scripts and instructions how to use them, contact either your PHD Account Manager, or open up a service request with support at <a class="external-link" href="https://support.emc.com/" rel="nofollow">https://support.emc.com/</a> and ask for the PHD Secure Install Tools.</td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">22</td><td class="confluenceTd" colspan="1">Move HAWQ Filespace</td><td class="confluenceTd" colspan="1">For HA clusters: For HAWQ, you need to move the HAWQ filespace to HA-enabled HDFS, as described in <a href="UpgradingPHDUsingtheCLI.html#UpgradingPHDUsingtheCLI-MoveHAWQFilespace">Moving HAWQ Filespace to HA-enabled HDFS</a>.</td><td class="confluenceTd" colspan="1"> </td></tr></tbody></table></div><p> </p><p> </p><p> </p><p> </p>
</div></div>
            </div><!-- end of content-->
            
            
          </div><!-- end of container -->
        </div><!--end of container-fluid-->
      </div><!--end of main-wrap-->

      <div class="site-footer desktop-only">
          <div class="container-fluid">
              <div class="site-footer-links">
                  <span class="version"><a href='/'>Pivotal Documentation</a></span>
                  <span>&copy;
                      <script>
                          var d = new Date();
                          document.write(d.getFullYear());
                      </script>
                      <a href='http://gopivotal.com'>Pivotal Software</a> Inc. All Rights Reserved.
                  </span>
              </div>
          </div>
      </div>

      <script type="text/javascript">
          (function() {
              var didInit = false;
              function initMunchkin() {
                  if(didInit === false) {
                      didInit = true;
                      Munchkin.init('625-IUJ-009');
                  }
              }
              var s = document.createElement('script');
              s.type = 'text/javascript';
              s.async = true;
              s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
              s.onreadystatechange = function() {
                  if (this.readyState == 'complete' || this.readyState == 'loaded') {
                      initMunchkin();
                  }
              };
              s.onload = initMunchkin;
              document.getElementsByTagName('head')[0].appendChild(s);
          })();
      </script>
  </div><!--end of viewport-->
  <div id="scrim"></div>
</body>
</html>