
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Runs a load job as defined in a YAML formatted control file. Synopsis gpload -f control_file [ -l log_file ] [ -h hostname ] [ -p port ] [ -U username ] [ -d database ] [ -W ] [ --gpfdist_timeout ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="gpload"/><meta name="DC.Relation" scheme="URI" content="../hawq-topics/ManagementUtilityReference.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="topic1"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>gpload</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="topic1"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#">linkToThis</a></div><div id="printlink"><a href="javascript:window.print();">printThisPage</a></div></td></tr><tr><td><div class="navheader">
<span class="navparent"><a class="link" href="../hawq-topics/ManagementUtilityReference.html" title="Management Utility Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Management Utility Reference</span></a></span>  </div></td><td width="75%"><a class="navheader_parent_path" href="../hawq-topics/../hawq-topics/HAWQAdministration.html" title="HAWQ Administration">HAWQ Administration</a> / <a class="navheader_parent_path" href="../hawq-topics/ManagementUtilityReference.html" title="Management Utility Reference">Management Utility Reference</a></td></tr></tbody></table>

    <h1 class="title topictitle1">gpload</h1>

    <div class="body">
        <p class="p">Runs a load job as defined in a YAML formatted control file.</p>

        <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
            
            <pre class="pre codeblock"><strong class="ph b">gpload</strong> <strong class="ph b">-f</strong> <var class="keyword varname">control_file</var> [<strong class="ph b">-l</strong> <var class="keyword varname">log_file</var>] [<strong class="ph b">-h</strong> <var class="keyword varname">hostname</var>] [<strong class="ph b">-p</strong> <var class="keyword varname">port</var>] 
   [<strong class="ph b">-U</strong> <var class="keyword varname">username</var>] [<strong class="ph b">-d</strong> <var class="keyword varname">database</var>] [<strong class="ph b">-W</strong>] [<strong class="ph b">--gpfdist_timeout</strong> <var class="keyword varname">seconds</var>] 
   [<strong class="ph b">--no_auto_trans</strong>] [[<strong class="ph b">-v</strong> | <strong class="ph b">-V</strong>] [<strong class="ph b">-q</strong>]] [<strong class="ph b">-D</strong>]

<strong class="ph b">gpload</strong> <strong class="ph b">-?</strong> 

<strong class="ph b">gpload</strong> <strong class="ph b">--version</strong></pre>

        </div>

        <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Prerequisites</h2>
            
            <p class="p">The client machine where <samp class="ph codeph">gpload</samp> is executed must have the
                following:</p>

            <ul class="ul">
                <li class="li" id="topic1__ke147914">Python 2.6.2 or later, <samp class="ph codeph">pygresql</samp> (the Python
                    interface to PostgreSQL), and <samp class="ph codeph">pyyaml</samp>. Note that Python and the
                    required Python libraries are included with the HAWQ server installation, so if
                    you have HAWQ installed on the machine where <samp class="ph codeph">gpload</samp> is running,
                    you do not need a separate Python installation.<div class="note note"><span class="notetitle">Note:</span> HAWQ Loaders for Windows
                        support only Python 2.5 (available from <a class="xref" href="http://python.org" target="_blank">www.python.org</a>).</div>
</li>

                <li class="li" id="topic1__ke147925">The <samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp> parallel file distribution program must be installed and in your
                        <samp class="ph codeph">$PATH</samp>. This program is located in
                        <samp class="ph codeph">$GPHOME/bin</samp> of your HAWQ server installation.</li>

                <li class="li" id="topic1__ke144650">Network access to and from all hosts in your HAWQ array (master
                    and segments).</li>

                <li class="li" id="topic1__ke145550">Network access to and from the hosts where the data to be loaded
                    resides (ETL servers).</li>

            </ul>

        </div>

        <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p"><samp class="ph codeph">gpload</samp> is a data loading utility that acts as an interface to HAWQ’s
                external table parallel loading feature. Using a load specification defined in a
                YAML formatted control file, gpload executes a load by invoking the HAWQ parallel
                file server (gpfdist), creating an external table definition based on the source
                data defined, and executing an <samp class="ph codeph">INSERT</samp> operation to load the source
                data into the target table in the database.</p>

            <div class="note note"><span class="notetitle">Note:</span> <samp class="ph codeph">UPDATE</samp> or <samp class="ph codeph">MERGE</samp> operations are not supported at
                this time. </div>

        </div>

        <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Options </h2><dl class="dl parml">
                
                    <dt class="dt pt dlterm">-f <var class="keyword varname">control_file</var></dt>

                    <dd class="dd pd"><strong class="ph b">Required. </strong>A YAML file that contains the load specification details.
                        See <a class="xref" href="#topic1__section7">Control File Format</a>.</dd>

                
                
                    <dt class="dt pt dlterm">--gpfdist_timeout <var class="keyword varname">seconds</var></dt>

                    <dd class="dd pd">Sets the timeout for the <samp class="ph codeph">gpfdist</samp> parallel file distribution
                        program to send a response. Enter a value from <samp class="ph codeph">0</samp> to
                            <samp class="ph codeph">30</samp> seconds (entering "<samp class="ph codeph">0</samp>" to disables
                        timeouts). Note that you might need to increase this value when operating on
                        high-traffic networks.</dd>

                
                
                    <dt class="dt pt dlterm">-l <var class="keyword varname">log_file</var></dt>

                    <dd class="dd pd">Specifies where to write the log file. Defaults to
                                <samp class="ph codeph">~/gpAdminLogs/gpload_<var class="keyword varname">YYYYMMDD</var></samp>.
                        For more information about the log file, see <a class="xref" href="#topic1__section9">Log File Format</a>.</dd>

                
                
                    <dt class="dt pt dlterm">-q (no screen output)</dt>

                    <dd class="dd pd">Run in quiet mode. Command output is not displayed on the screen, but is
                        still written to the log file.</dd>

                
                
                    <dt class="dt pt dlterm">-D (debug mode)</dt>

                    <dd class="dd pd">Check for error conditions, but do not execute the load. </dd>

                
                
                    <dt class="dt pt dlterm">-v (verbose mode)</dt>

                    <dd class="dd pd">Show verbose output of the load steps as they are executed.</dd>

                
                
                    <dt class="dt pt dlterm">-V (very verbose mode)</dt>

                    <dd class="dd pd">Shows very verbose output.</dd>

                
                
                    <dt class="dt pt dlterm">-? (show help)</dt>

                    <dd class="dd pd">Show help, then exit.</dd>

                
                
                    <dt class="dt pt dlterm">--version</dt>

                    <dd class="dd pd">Show the version of this utility, then exit.</dd>

                
            </dl>

            <div class="sectiondiv">
                <strong class="ph b">Connection Options</strong>
                <dl class="dl parml">
                    
                        <dt class="dt pt dlterm">-d <var class="keyword varname">database</var></dt>

                        <dd class="dd pd">The database to load into. If not specified, reads from the load control
                            file, the environment variable <samp class="ph codeph">$PGDATABASE</samp> or defaults
                            to the current system user name.</dd>

                    
                    
                        <dt class="dt pt dlterm">-h <var class="keyword varname">hostname</var></dt>

                        <dd class="dd pd">Specifies the host name of the machine on which the HAWQ master database
                            server is running. If not specified, reads from the load control file,
                            the environment variable <samp class="ph codeph">$PGHOST</samp> or defaults to
                                <samp class="ph codeph">localhost</samp>.</dd>

                    
                    
                        <dt class="dt pt dlterm">-p <var class="keyword varname">port</var></dt>

                        <dd class="dd pd">Specifies the TCP port on which the HAWQ master database server is
                            listening for connections. If not specified, reads from the load control
                            file, the environment variable <samp class="ph codeph">$PGPORT</samp> or defaults to
                            5432.</dd>

                    
                    
                        <dt class="dt pt dlterm">-U <var class="keyword varname">username</var></dt>

                        <dd class="dd pd">The database role name to connect as. If not specified, reads from the
                            load control file, the environment variable <samp class="ph codeph">$PGUSER</samp> or
                            defaults to the current system user name.</dd>

                    
                    
                        <dt class="dt pt dlterm">-W (force password prompt)</dt>

                        <dd class="dd pd">Force a password prompt. If not specified, reads the password from the
                            environment variable <samp class="ph codeph">$PGPASSWORD</samp> or from a password
                            file specified by <samp class="ph codeph">$PGPASSFILE</samp> or in
                                <span class="ph filepath">~/.pgpass</span>. If these are not set, then
                                <samp class="ph codeph">gpload</samp> will prompt for a password even if
                                <samp class="ph codeph">-W</samp> is not supplied.</dd>

                    
                </dl>
</div></div>

        <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Control File Format</h2>
            
            <p class="p">The <samp class="ph codeph">gpload</samp> control file uses the <a class="xref" href="http://yaml.org/spec/1.1/" target="_blank">YAML 1.1</a>
                document format and then implements its own schema for defining the various steps of
                a HAWQ load operation. The control file must be a valid YAML document.</p>

            <p class="p">The <samp class="ph codeph">gpload</samp> program processes the control file document in order and
                uses indentation (spaces) to determine the document hierarchy and the relationships
                of the sections to one another. The use of white space is significant. White space
                should not be used simply for formatting purposes, and tabs should not be used at
                all.</p>

            <p class="p">The basic structure of a load control file is:</p>

            <pre class="pre codeblock">---
<a class="xref" href="#topic1__cfversion">VERSION</a>: 1.0.0.1
<a class="xref" href="#topic1__cfdatabase">DATABASE</a>: <var class="keyword varname">db_name</var>
<a class="xref" href="#topic1__cfuser">USER</a>: <var class="keyword varname">db_username</var>
<a class="xref" href="#topic1__cfhost">HOST</a>: <var class="keyword varname">master_hostname</var>
<a class="xref" href="#topic1__cfport">PORT</a>: <var class="keyword varname">master_port</var>
<a class="xref" href="#topic1__cfgpload">GPLOAD</a>:
   <a class="xref" href="#topic1__cfinput">INPUT</a>:
    - <a class="xref" href="#topic1__cfsource">SOURCE</a>:
         <a class="xref" href="#topic1__cfsourcelocalname">LOCAL_HOSTNAME</a>:
           - <var class="keyword varname">hostname_or_ip</var>
         <a class="xref" href="#topic1__cfsourceport">PORT</a>: <var class="keyword varname">http_port</var>
       | <a class="xref" href="#topic1__cfversion">PORT_RANGE</a>: [<var class="keyword varname">start_port_range</var>, <var class="keyword varname">end_port_range</var>]
         <a class="xref" href="#topic1__cfsourcefile">FILE</a>: 
           - <var class="keyword varname">/path/to/input_file</var>
         <a class="xref" href="#topic1__cfsourcessl">SSL</a>: true | false
         <a class="xref" href="#topic1__cfsourcecertificatespath">CERTIFICATES_PATH</a>: <var class="keyword varname">/path/to/certificates</var>
    - <a class="xref" href="#topic1__cfcolumns">COLUMNS</a>:
           - <var class="keyword varname">field_name</var>: <var class="keyword varname">data_type</var>
    - <a class="xref" href="#topic1__cftransform">TRANSFORM</a>: '<var class="keyword varname">transformation</var>'
    - <a class="xref" href="#topic1__cftransformconfig">TRANSFORM_CONFIG</a>: '<var class="keyword varname">configuration-file-path</var>' 
    - <a class="xref" href="#topic1__cfmaxlinelength">MAX_LINE_LENGTH</a>: <var class="keyword varname">integer</var> 
    - <a class="xref" href="#topic1__cfformat">FORMAT</a>: text | csv
    - <a class="xref" href="#topic1__cfdelimiter">DELIMITER</a>: '<var class="keyword varname">delimiter_character</var>'
    - <a class="xref" href="#topic1__cfescape">ESCAPE</a>: '<var class="keyword varname">escape_character</var>' | 'OFF'
    - <a class="xref" href="#topic1__cfnullas">NULL_AS</a>: '<var class="keyword varname">null_string</var>'
    - <a class="xref" href="#topic1__cfforcenotnull">FORCE_NOT_NULL</a>: true | false
    - <a class="xref" href="#topic1__cfquote">QUOTE</a>: '<var class="keyword varname">csv_quote_character</var>'
    - <a class="xref" href="#topic1__cfheader">HEADER</a>: true | false
    - <a class="xref" href="#topic1__cfencoding">ENCODING</a>: <var class="keyword varname">database_encoding</var>
   <a class="xref" href="#topic1__cfoutput">OUTPUT</a>:
    - <a class="xref" href="#topic1__cftable">TABLE</a>: <var class="keyword varname">schema.table_name</var>
    - <a class="xref" href="#topic1__cfmode">MODE</a>: insert
    - <a class="xref" href="#topic1__cfmapping">MAPPING</a>:
              <var class="keyword varname">target_column_name</var>: <var class="keyword varname">source_column_name</var> | '<var class="keyword varname">expression</var>'
   <a class="xref" href="#topic1__cfpreload">PRELOAD</a>:
    - <a class="xref" href="#topic1__cftruncate">TRUNCATE</a>: true | false
    - <a class="xref" href="#topic1__cfreusetables">REUSE_TABLES</a>: true | false
   <a class="xref" href="#topic1__cfsql">SQL</a>:
    - <a class="xref" href="#topic1__cfbefore">BEFORE</a>: "<var class="keyword varname">sql_command</var>"
    - <a class="xref" href="#topic1__cfafter">AFTER</a>: "<var class="keyword varname">sql_command</var>"</pre>

            <dl class="dl parml">
                
                    <dt class="dt pt dlterm" id="topic1__cfversion">VERSION</dt>

                    <dd class="dd pd">Optional. The version of the <samp class="ph codeph">gpload</samp> control file schema.
                        The current version is 1.0.0.1. </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfdatabase">DATABASE</dt>

                    <dd class="dd pd">Optional. Specifies which database in HAWQ to connect to. If not specified,
                        defaults to <samp class="ph codeph">$PGDATABASE</samp> if set or the current system user
                        name. You can also specify the database on the command line using the
                            <samp class="ph codeph">-d</samp> option. </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfuser">USER</dt>

                    <dd class="dd pd">Optional. Specifies which database role to use to connect. If not specified,
                        defaults to the current user or <samp class="ph codeph">$PGUSER</samp> if set. You can
                        also specify the database role on the command line using the
                            <samp class="ph codeph">-U</samp> option. </dd>

                    <dd class="dd pd">If the user running <samp class="ph codeph">gpload</samp> is not a HAWQ superuser, then
                        the server configuration parameter
                            <samp class="ph codeph">gp_external_grant_privileges</samp> must be set to
                            <samp class="ph codeph">on</samp> in order for the load to be processed.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfhost">HOST</dt>

                    <dd class="dd pd">Optional. Specifies HAWQ master host name. If not specified, defaults to
                        localhost or <samp class="ph codeph">$PGHOST</samp> if set. You can also specify the
                        master host name on the command line using the <samp class="ph codeph">-h</samp>
                        option.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfport">PORT</dt>

                    <dd class="dd pd">Optional. Specifies HAWQ master port. If not specified, defaults to 5432 or
                            <samp class="ph codeph">$PGPORT</samp> if set. You can also specify the master port on
                        the command line using the <samp class="ph codeph">-p</samp> option.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfgpload">GPLOAD</dt>

                    <dd class="dd pd">Required. Begins the load specification section. A <samp class="ph codeph">GPLOAD</samp>
                        specification must have an <samp class="ph codeph">INPUT</samp> and an
                            <samp class="ph codeph">OUTPUT</samp> section defined. <dl class="dl parml"><dt class="dt pt dlterm" id="topic1__cfinput">INPUT</dt>
<dd class="dd pd">Required. Defines the location and
                                    the format of the input data to be loaded.
                                        <samp class="ph codeph">gpload</samp> will start one or more instances of
                                    the <samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp> file distribution program on the current host
                                    and create the required external table definition(s) in HAWQ
                                    that point to the source data. Note that the host from which you
                                    run <samp class="ph codeph">gpload</samp> must be accessible over the network
                                    by all HAWQ hosts (master and segments).<dl class="dl parml">
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfsource">SOURCE</dt>

                                            <dd class="dd pd">Required. The <samp class="ph codeph">SOURCE</samp> block of an
                                                  <samp class="ph codeph">INPUT</samp> specification defines the
                                                location of a source file. An <samp class="ph codeph">INPUT</samp>
                                                section can have more than one
                                                  <samp class="ph codeph">SOURCE</samp> block defined. Each
                                                  <samp class="ph codeph">SOURCE</samp> block defined corresponds
                                                to one instance of the <samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp> file distribution program that will be
                                                started on the local machine. Each
                                                  <samp class="ph codeph">SOURCE</samp> block defined must have a
                                                  <samp class="ph codeph">FILE</samp> specification.<div class="p">
                                                  <dl class="dl parml">
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcelocalname">LOCAL_HOSTNAME</dt>

                                                  <dd class="dd pd">Optional. Specifies the host name or IP
                                                  address of the local machine on which
                                                  <samp class="ph codeph">gpload</samp> is running. If this
                                                  machine is configured with multiple network
                                                  interface cards (NICs), you can specify the host
                                                  name or IP of each individual NIC to allow network
                                                  traffic to use all NICs simultaneously. The
                                                  default is to use the local machine's primary host
                                                  name or IP only. </dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourceport">PORT</dt>

                                                  <dd class="dd pd">Optional. Specifies the specific port number
                                                  that the <samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp> file
                                                  distribution program should use. You can also
                                                  supply a <samp class="ph codeph">PORT_RANGE</samp> to select an
                                                  available port from the specified range. If both
                                                  <samp class="ph codeph">PORT</samp> and
                                                  <samp class="ph codeph">PORT_RANGE</samp> are defined, then
                                                  <samp class="ph codeph">PORT</samp> takes precedence. If neither
                                                  <samp class="ph codeph">PORT</samp> or
                                                  <samp class="ph codeph">PORT_RANGE</samp> are defined, the
                                                  default is to select an available port between
                                                  8000 and 9000. <p class="p">If multiple host names are
                                                  declared in <samp class="ph codeph">LOCAL_HOSTNAME</samp>, this
                                                  port number is used for all hosts. This
                                                  configuration is desired if you want to use all
                                                  NICs to load the same file or set of files in a
                                                  given directory location.</p>
</dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourceportrange">PORT_RANGE</dt>

                                                  <dd class="dd pd">Optional. Can be used instead of
                                                  <samp class="ph codeph">PORT</samp> to supply a range of port
                                                  numbers from which <samp class="ph codeph">gpload</samp> can
                                                  choose an available port for this instance of the
                                                  <samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp> file distribution
                                                  program.</dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcefile">FILE</dt>

                                                  <dd class="dd pd">Required. Specifies the location of a file,
                                                  named pipe, or directory location on the local
                                                  file system that contains data to be loaded. You
                                                  can declare more than one file so long as the data
                                                  is of the same format in all files specified.
                                                  <p class="p">If the files are compressed using
                                                  <samp class="ph codeph">gzip</samp> or <samp class="ph codeph">bzip2</samp>
                                                  (have a <samp class="ph codeph">.gz</samp> or
                                                  <samp class="ph codeph">.bz2</samp> file extension), the files
                                                  will be uncompressed automatically (provided that
                                                  <samp class="ph codeph">gunzip</samp> or
                                                  <samp class="ph codeph">bunzip2</samp> is in your
                                                  path).</p>
<p class="p">When specifying which source files to
                                                  load, you can use the wildcard character
                                                  (<samp class="ph codeph">*</samp>) or other C-style pattern
                                                  matching to denote multiple files. The files
                                                  specified are assumed to be relative to the
                                                  current directory from which
                                                  <samp class="ph codeph">gpload</samp> is executed (or you can
                                                  declare an absolute path).</p>
</dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcessl">SSL</dt>

                                                  <dd class="dd pd">Optional. Specifies usage of SSL
                                                  encryption.</dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcecertificatespath">CERTIFICATES_PATH</dt>

                                                  <dd class="dd pd">Required when SSL is <samp class="ph codeph">true</samp>;
                                                  cannot be specified when SSL is
                                                  <samp class="ph codeph">false</samp> or unspecified. The
                                                  location specified in
                                                  <samp class="ph codeph">CERTIFICATES_PATH</samp> must contain
                                                  the following files: <ul class="ul" id="topic1__ul_azs_eau_mo">
                                                  <li class="li" id="topic1__ke148142">The server certificate file,
                                                  <samp class="ph codeph">server.crt</samp></li>

                                                  <li class="li" id="topic1__ke148143">The server private key file,
                                                  <samp class="ph codeph">server.key</samp></li>

                                                  <li class="li" id="topic1__ke148144">The trusted certificate
                                                  authorities, <samp class="ph codeph">root.crt</samp></li>

                                                  </ul>
<p class="p">The root directory (<samp class="ph codeph">/</samp>)
                                                  cannot be specified as
                                                  <samp class="ph codeph">CERTIFICATES_PATH</samp>.</p>
</dd>

                                                  
                                                  </dl>

                                                </div>
</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfcolumns">COLUMNS</dt>

                                            <dd class="dd pd">Optional. Specifies the schema of the source data
                                                file(s) in the format of
                                                  <samp class="ph codeph"><var class="keyword varname">field_name</var>:<var class="keyword varname">data_type</var></samp>.
                                                The <samp class="ph codeph">DELIMITER</samp> character in the
                                                source file is what separates two data value fields
                                                (columns). A row is determined by a line feed
                                                character (<samp class="ph codeph">0x0a</samp>). <p class="p">If the input
                                                  <samp class="ph codeph">COLUMNS</samp> are not specified, then
                                                  the schema of the output <samp class="ph codeph">TABLE</samp> is
                                                  implied, meaning that the source data must have
                                                  the same column order, number of columns, and data
                                                  format as the target table.</p>
<p class="p">The default
                                                  source-to-target mapping is based on a match of
                                                  column names as defined in this section and the
                                                  column names in the target <samp class="ph codeph">TABLE</samp>.
                                                  This default mapping can be overridden using the
                                                  <samp class="ph codeph">MAPPING</samp> section.</p>
</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cftransform">TRANSFORM</dt>

                                            <dd class="dd pd">Optional. Specifies the name of the input XML
                                                transformation passed to
                                                <samp class="ph codeph">gpload</samp>.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cftransformconfig">TRANSFORM_CONFIG</dt>

                                            <dd class="dd pd">Optional. Specifies the location of the XML
                                                transformation configuration file that is specified
                                                in the <samp class="ph codeph">TRANSFORM</samp> parameter,
                                                above.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfmaxlinelength">MAX_LINE_LENGTH</dt>

                                            <dd class="dd pd">Optional. An integer that specifies the maximum
                                                length of a line in the XML transformation data
                                                passed to <samp class="ph codeph">gpload</samp>.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfformat">FORMAT</dt>

                                            <dd class="dd pd">Optional. Specifies the format of the source data
                                                file(s) - either plain text (<samp class="ph codeph">TEXT</samp>)
                                                or comma separated values (<samp class="ph codeph">CSV</samp>)
                                                format. Defaults to <samp class="ph codeph">TEXT</samp> if not
                                                specified.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfdelimiter">DELIMITER</dt>

                                            <dd class="dd pd">Optional. Specifies a single ASCII character that
                                                separates columns within each row (line) of data.
                                                The default is a tab character in
                                                  <samp class="ph codeph">TEXT</samp> mode, a comma in
                                                  <samp class="ph codeph">CSV</samp> mode. You can also specify a
                                                non-printable ASCII character via an escape sequence
                                                using the Unicode representation of the ASCII
                                                character. For example, <samp class="ph codeph">"\014"</samp>
                                                represents the shift out character.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfescape">ESCAPE</dt>

                                            <dd class="dd pd">Specifies the single character that is used for C
                                                escape sequences (such as <samp class="ph codeph">\n</samp>,
                                                  <samp class="ph codeph">\t</samp>, <samp class="ph codeph">\100</samp>, and so
                                                on) and for escaping data characters that might
                                                otherwise be taken as row or column delimiters. Make
                                                sure to choose an escape character that is not used
                                                anywhere in your actual column data. The default
                                                escape character is a \ (backslash) for
                                                text-formatted files and a <samp class="ph codeph">"</samp>
                                                (double quote) for csv-formatted files, however it
                                                is possible to specify another character to
                                                represent an escape. It is also possible to disable
                                                escaping in text-formatted files by specifying the
                                                value <samp class="ph codeph">'OFF'</samp> as the escape value.
                                                This is very useful for data such as text-formatted
                                                web log data that has many embedded backslashes that
                                                are not intended to be escapes.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfnullas">NULL_AS</dt>

                                            <dd class="dd pd">Optional. Specifies the string that represents a
                                                null value. The default is <samp class="ph codeph">\N</samp>
                                                (backslash-N) in <samp class="ph codeph">TEXT</samp> mode, and an
                                                empty value with no quotations in
                                                  <samp class="ph codeph">CSV</samp> mode. You might prefer an
                                                empty string even in <samp class="ph codeph">TEXT</samp> mode for
                                                cases where you do not want to distinguish nulls
                                                from empty strings. Any source data item that
                                                matches this string will be considered a null
                                                value.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfforcenotnull">FORCE_NOT_NULL</dt>

                                            <dd class="dd pd">Optional. In CSV mode, processes each specified
                                                column as though it were quoted and hence not a NULL
                                                value. For the default null string in CSV mode
                                                (nothing between two delimiters), this causes
                                                missing values to be evaluated as zero-length
                                                strings.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfquote">QUOTE</dt>

                                            <dd class="dd pd">Required when <samp class="ph codeph">FORMAT</samp> is
                                                  <samp class="ph codeph">CSV</samp>. Specifies the quotation
                                                character for <samp class="ph codeph">CSV</samp> mode. The default
                                                is double-quote (<samp class="ph codeph">"</samp>).</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfheader">HEADER</dt>

                                            <dd class="dd pd">Optional. Specifies that the first line in the data
                                                file(s) is a header row (contains the names of the
                                                columns) and should not be included as data to be
                                                loaded. If using multiple data source files, all
                                                files must have a header row. The default is to
                                                assume that the input files do not have a header
                                                row.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfencoding">ENCODING</dt>

                                            <dd class="dd pd">Optional. Character set encoding of the source data.
                                                Specify a string constant (such as
                                                  <samp class="ph codeph">'SQL_ASCII'</samp>), an integer encoding
                                                number, or <samp class="ph codeph">'DEFAULT'</samp> to use the
                                                default client encoding. If not specified, the
                                                default client encoding is used.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cferrorlimit">ERROR_LIMIT</dt>

                                            <dd class="dd pd">Optional. Enables single row error isolation mode
                                                for this load operation. When enabled, input rows
                                                that have format errors will be discarded provided
                                                that the error limit count is not reached on any
                                                HAWQ segment instance during input processing. If
                                                the error limit is not reached, all good rows will
                                                be loaded and any error rows will either be
                                                discarded or logged to the table specified in
                                                  <samp class="ph codeph">ERROR_TABLE</samp>. The default is to
                                                abort the load operation on the first error
                                                encountered. Note that single row error isolation
                                                only applies to data rows with format errors; for
                                                example, extra or missing attributes, attributes of
                                                a wrong data type, or invalid client encoding
                                                sequences. Constraint errors, such as primary key
                                                violations, will still cause the load operation to
                                                abort if encountered.</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cferrortable">ERROR_TABLE</dt>

                                            <dd class="dd pd">Optional when <samp class="ph codeph">ERROR_LIMIT</samp> is
                                                declared. Specifies an error table where rows with
                                                formatting errors will be logged when running in
                                                single row error isolation mode. You can then
                                                examine this error table to see error rows that were
                                                not loaded (if any). If the
                                                  <samp class="ph codeph">ERROR_TABLE</samp> specified already
                                                exists, it will be used. If it does not exist, it
                                                will be automatically generated.</dd>

                                        
                                    </dl>
</dd>
<dt class="dt pt dlterm" id="topic1__cfoutput">OUTPUT</dt>
<dd class="dd pd">Required. Defines the target table and final
                                    data column values that are to be loaded into the
                                                database.<dl class="dl parml"><dt class="dt pt dlterm" id="topic1__cftable">TABLE</dt>
<dd class="dd pd">Required. The name of the target
                                                table to load into.</dd>
<dt class="dt pt dlterm" id="topic1__cfmode">MODE</dt>
<dd class="dd pd">Optional. Currently, the
                                                only mode is INSERT.</dd>

                                            <dd class="dd pd"><span class="keyword option">INSERT</span> - Loads data into the target
                                                table using the following method:
                                                <pre class="pre codeblock">INSERT INTO <var class="keyword varname">target_table</var> SELECT * FROM <var class="keyword varname">input_data</var>;</pre>
</dd>
<dt class="dt pt dlterm" id="topic1__cfmapping">MAPPING</dt>
<dd class="dd pd">Optional. If a
                                                mapping is specified, it overrides the default
                                                source-to-target column mapping. The default
                                                source-to-target mapping is based on a match of
                                                column names as defined in the source
                                                  <samp class="ph codeph">COLUMNS</samp> section and the column
                                                names of the target <samp class="ph codeph">TABLE</samp>. A
                                                mapping is specified as
                                                  either:</dd>
<dd class="dd pd"><samp class="ph codeph"><var class="keyword varname">target_column_name</var>:
                                                  <var class="keyword varname">source_column_name</var></samp></dd>
<dd class="dd pd">or</dd>
<dd class="dd pd"><samp class="ph codeph"><var class="keyword varname">target_column_name</var>:
                                                  '<var class="keyword varname">expression</var>'</samp></dd>
<dd class="dd pd">Where
                                                  <var class="keyword varname">expression</var> is any expression
                                                that you would specify in the
                                                  <samp class="ph codeph">SELECT</samp> list of a query, such as a
                                                constant value, a column reference, an operator
                                                invocation, a function call, and so
                                            on.</dd>
</dl>
</dd>
</dl>
</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfpreload">PRELOAD</dt>

                    <dd class="dd pd">Optional. Specifies operations to run prior to the load operation. Right now
                        the only preload operation is <samp class="ph codeph">TRUNCATE</samp>.<dl class="dl parml"><dt class="dt pt dlterm" id="topic1__cftruncate">TRUNCATE</dt>
<dd class="dd pd">Optional. If set to true,
                                        <samp class="ph codeph">gpload</samp> will remove all rows in the target
                                    table prior to loading it.</dd>
<dt class="dt pt dlterm" id="topic1__cfreusetables">REUSE_TABLES</dt>
<dd class="dd pd">Optional. If set to
                                    true, <samp class="ph codeph">gpload</samp> will not drop the external table
                                    objects and staging table objects it creates. These objects will
                                    be reused for future load operations that use the same load
                                    specifications. This improves performance of trickle loads
                                    (ongoing small loads to the same target
                            table).</dd>
</dl>
</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfsql">SQL</dt>

                    <dd class="dd pd">Optional. Defines SQL commands to run before and/or after the load
                        operation. You can specify multiple <samp class="ph codeph">BEFORE</samp> and/or
                            <samp class="ph codeph">AFTER</samp> commands. List commands in the order of desired
                                    execution.<dl class="dl parml"><dt class="dt pt dlterm" id="topic1__cfbefore">BEFORE</dt>
<dd class="dd pd">Optional. An SQL command to run before the load
                                    operation starts. Enclose commands in
                                    quotes.</dd>
<dt class="dt pt dlterm" id="topic1__cfafter">AFTER</dt>
<dd class="dd pd">Optional. An SQL command to run after the load
                                    operation completes. Enclose commands in
                            quotes.</dd>
</dl>
</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section9"><h2 class="title sectiontitle">Log File Format</h2>
            
            <p class="p">Log files output by <samp class="ph codeph">gpload</samp> have the following format:</p>

            <pre class="pre codeblock"><var class="keyword varname">timestamp</var>|<var class="keyword varname">level</var>|<var class="keyword varname">message</var></pre>

            <p class="p">Where <var class="keyword varname">timestamp</var> takes the form: <samp class="ph codeph">YYYY-MM-DD
                    HH:MM:SS</samp>, <var class="keyword varname">level</var> is one of <samp class="ph codeph">DEBUG</samp>,
                    <samp class="ph codeph">LOG</samp>, <samp class="ph codeph">INFO</samp>, <samp class="ph codeph">ERROR</samp>, and
                    <var class="keyword varname">message</var> is a normal text message.</p>

            <p class="p">Some <samp class="ph codeph">INFO</samp> messages that may be of interest in the log files are
                (where <var class="keyword varname">#</var> corresponds to the actual number of seconds, units of
                data, or failed rows):</p>

            <pre class="pre codeblock">INFO|running time: <var class="keyword varname">#.##</var> seconds
INFO|transferred <var class="keyword varname">#.#</var> kB of <var class="keyword varname">#.#</var> kB.
INFO|gpload succeeded
INFO|gpload succeeded with warnings
INFO|gpload failed
INFO|1 bad row
INFO|<var class="keyword varname">#</var> bad rows</pre>

        </div>

        <div class="section" id="topic1__section8"><h2 class="title sectiontitle">Notes</h2>
            
            <p class="p">If your database object names were created using a double-quoted identifier
                (delimited identifier), you must specify the delimited name within single quotes in
                the <samp class="ph codeph">gpload</samp> control file. For example, if you create a table as
                follows:</p>

            <pre class="pre codeblock">CREATE TABLE "MyTable" ("MyColumn" text);</pre>

            <p class="p">Your YAML-formatted <samp class="ph codeph">gpload</samp> control file would refer to the above
                table and column names as follows:</p>

            <pre class="pre codeblock">- COLUMNS:
   - '"MyColumn"': text
OUTPUT:
   - TABLE: public.'"MyTable"'</pre>

        </div>

        <div class="section" id="topic1__section10"><h2 class="title sectiontitle">Examples</h2>
            
            <p class="p">Run a load job as defined in <samp class="ph codeph">my_load.yml</samp>:</p>

            <pre class="pre codeblock">gpload -f my_load.yml</pre>

            <p class="p">Example load control file:</p>

            <pre class="pre codeblock">---
VERSION: 1.0.0.1
DATABASE: ops
USER: gpadmin
HOST: mdw-1
PORT: 5432
GPLOAD:
	INPUT:
	  - SOURCE:
		LOCAL_HOSTNAME:
			- etl1-1
			- etl1-2
			- etl1-3
			- etl1-4
		PORT: 8081
		FILE:
		  - /var/load/data/*
	  - COLUMNS:
	  - name: text
	  - amount: float4
	  - category: text
	  - desc: text
	  - date: date
	  - FORMAT: text
	  - DELIMITER: '|'
	OUTPUT:
	  - TABLE: payables.expenses
	  - MODE: INSERT
	 SQL:
	  - BEFORE: "INSERT INTO audit VALUES('start',current_timestamp)"
	  - AFTER: "INSERT INTO audit VALUES('end',current_timestamp)"</pre>

        </div>

        <div class="section" id="topic1__section11"><h2 class="title sectiontitle">See Also</h2>
            
            <p class="p"><samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp>, <samp class="ph codeph"><a class="xref" href="CREATE-EXTERNAL-TABLE.html">CREATE EXTERNAL TABLE</a></samp></p>

        </div>

    </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../hawq-topics/ManagementUtilityReference.html" title="Management Utility Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Management Utility Reference</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>