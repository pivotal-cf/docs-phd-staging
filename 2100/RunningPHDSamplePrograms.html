<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <!-- Use title if it's in the page YAML frontmatter -->
  <title>Running PHD Sample Programs | Pivotal HD Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link href="stylesheets/master.css" media="screen,print" rel="stylesheet" type="text/css" />
  <link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
  <link href='http://www.pivotal.io/misc/favicon.ico' rel='shortcut icon'>
  <script src="javascripts/all.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    if (window.location.host === 'docs.pivotal.io') {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-39702075-1']);
      _gaq.push(['_setDomainName', 'pivotal.io']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    }
  </script>
  <!-- Confluence HTML stylesheet -->
   <link href="stylesheets/site-conf.css" media="screen,print" rel="stylesheet"  type="text/css" /> 
   
   <!-- Left-navigation code -->
    <link href="stylesheets/dcaccordion.css" rel="stylesheet" type="text/css" />
    <!--End left-navigation code -->
   
</head>

<body class="pivotalhd pivotalhd_getstarted pivotalhd_getstarted_phd-docs has-subnav">

<div class="viewport">
<div class='wrap'>
  <script src="//use.typekit.net/clb0qji.js" type="text/javascript"></script>
  <script type="text/javascript">
      try {
          Typekit.load();
      } catch (e) {
      }
  </script>
  <script type="text/javascript">
      document.domain = "pivotal.io";
  </script>

  <script type="text/javascript">
    WebFontConfig = {
      google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
    };
    (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
    })();
  </script>
   
    <header class="header header-layout">
      <h1 class="logo">
        <a href="index.html">Pivotal HD Documentation</a> v2.1.0
      </h1>
      <div class="header-links js-bar-links">
        <div class="btn-menu" data-behavior="MenuMobile"></div>
        <div class="header-item">
          <a href="http://docs.pivotal.io">Docs Home</a>
        </div>
        <div class="header-item">
          <a href="http://support.pivotal.io" target="_blank">Support</a>
        </div>
        <div class="header-item searchbar js-searchbar">
          <a class="search-icon" data-behavior="Search"></a>
          <div class="search-input">
            <!-- Google CSE Search Box -->
            <div class="search-input-inner" id="docs-search">
                <gcse:search></gcse:search>
            </div>
          </div>
        </div>
      </div>
    </header>
    
    <div class="container">
    
	<!--INSERT SIDENAV -->
	<div id="sub-nav" class="nav-container">

         <p class="productname"><a href="PivotalHD.html">Pivotal HD</a></p>
         <ul>
            <li>
               <a href="PHDEnterprise2.1.0ReleaseNotes.html">PHD Enterprise 2.1.0 Release Notes</a>
            </li>
            <li>
               <a href="PHDInstallationandAdministration.html">PHD Installation and Administration</a>
               <ul>
                  <li>
                     <a href="OverviewofPHD.html">Overview of PHD</a>
                  </li>
                  <li>
                     <a href="InstallationOverview.html">Installation Overview</a>
                     <ul>
                        <li>
                           <a href="CommandLineInstallationFeatures.html">Command Line Installation Features</a>
                        </li>
                        <li>
                           <a href="DeploymentOptions.html">Deployment Options</a>
                        </li>
                        <li>
                           <a href="PlanningyourPHDClusterDeployment.html">Planning your PHD Cluster Deployment</a>
                        </li>
                        <li>
                           <a href="BestPracticesforSelectingHardware.html">Best Practices for Selecting Hardware</a>
                        </li>
                        <li>
                           <a href="BestPracticesforDeployingHadoopServices.html">Best Practices for Deploying Hadoop Services</a>
                        </li>
                        <li>
                           <a href="HighAvailabilityBestPractices.html">High Availability Best Practices</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDInstallationPrerequisites.html">PHD Installation Prerequisites</a>
                     <ul>
                        <li>
                           <a href="BeforeYouBeginInstallingPHD.html">Before You Begin Installing PHD</a>
                        </li>
                        <li>
                           <a href="PHDPrerequisiteChecklist.html">PHD Prerequisite Checklist</a>
                        </li>
                        <li>
                           <a href="PHD-DNSLookup.html">PHD - DNS Lookup</a>
                        </li>
                        <li>
                           <a href="PHD-JAVAJDK.html">PHD - JAVA JDK</a>
                        </li>
                        <li>
                           <a href="PHD-VerifyPackageAccessibility.html">PHD - Verify Package Accessibility</a>
                        </li>
                        <li>
                           <a href="PHD-TurnOffiptables.html">PHD - Turn Off iptables</a>
                        </li>
                        <li>
                           <a href="PHD-DisableSELinux.html">PHD - Disable SELinux</a>
                        </li>
                        <li>
                           <a href="EPELYumRepository.html">EPEL Yum Repository</a>
                        </li>
                        <li>
                           <a href="SudoConfigurationFiles.html">Sudo Configuration Files</a>
                        </li>
                        <li>
                           <a href="FQDN.html">FQDN</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="InstallingPHDUsingtheCLI.html">Installing PHD Using the CLI</a>
                     <ul>
                        <li>
                           <a href="PHDInstallationChecklist.html">PHD Installation Checklist</a>
                        </li>
                        <li>
                           <a href="InstallingPivotalCommandCenter.html">Installing Pivotal Command Center</a>
                        </li>
                        <li>
                           <a href="ConfiguringKerberosandLDAP.html">Configuring Kerberos and LDAP</a>
                        </li>
                        <li>
                           <a href="PHD-ImportingthePackages.html">PHD - Importing the Packages</a>
                        </li>
                        <li>
                           <a href="EditingtheClusterConfigurationFiles.html">Editing the Cluster Configuration Files</a>
                        </li>
                        <li>
                           <a href="EditingtheHAWQConfigurationFile.html">Editing the HAWQ Configuration File</a>
                        </li>
                        <li>
                           <a href="ForPXFwithGemFireXD.html">For PXF with GemFire XD</a>
                        </li>
                        <li>
                           <a href="DeployingtheCluster.html">Deploying the Cluster</a>
                        </li>
                        <li>
                           <a href="StartingtheCluster.html">Starting the Cluster</a>
                        </li>
                        <li>
                           <a href="InitializingandStartingHAWQ.html">Initializing and Starting HAWQ</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDPost-Installation.html">PHD Post-Installation</a>
                     <ul>
                        <li>
                           <a href="VerifyingPHDServiceStatus.html">Verifying PHD Service Status</a>
                        </li>
                        <li>
                           <a href="RunningPHDSamplePrograms.html">Running PHD Sample Programs</a>
                        </li>
                        <li>
                           <a href="Post-InstallationReferenceInformation.html">Post-Installation Reference Information</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDUpgradePrerequisites.html">PHD Upgrade Prerequisites</a>
                     <ul>
                        <li>
                           <a href="UpgradePrerequisiteChecklist.html">Upgrade Prerequisite Checklist</a>
                        </li>
                        <li>
                           <a href="FileLocationsandBackups.html">File Locations and Backups</a>
                        </li>
                        <li>
                           <a href="VerifyJavaJDK.html">Verify Java JDK</a>
                        </li>
                        <li>
                           <a href="CompactHBaseTables.html">Compact HBase Tables</a>
                        </li>
                        <li>
                           <a href="SudoConfigurationFile.html">Sudo Configuration File</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="UpgradingPHD2.0.xto2.1.0.html">Upgrading PHD 2.0.x to 2.1.0</a>
                     <ul>
                        <li>
                           <a href="PHDUpgradeChecklist-2.0.xto2.1.0.html">PHD Upgrade Checklist - 2.0.x to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeInstructions-2.0.xto2.1.0.html">Upgrade Instructions - 2.0.x to 2.1.0</a>
                        </li>
                        <li>
                           <a href="MovingHAWQFilespacetoHA-enabledHDFS-2.0.xto2.1.0.html">Moving HAWQ Filespace to HA-enabled HDFS - 2.0.x to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeReferenceInformation-2.0.xto2.1.0.html">Upgrade Reference Information - 2.0.x to 2.1.0</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="UpgradingPHDfrom1.1.1to2.1.0.html">Upgrading PHD from 1.1.1 to 2.1.0</a>
                     <ul>
                        <li>
                           <a href="UpgradeChecklist-1.1.1to2.1.0.html">Upgrade Checklist - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeInstructions-1.1.1to2.1.0.html">Upgrade Instructions - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="MovingHAWQFilespacetoHA-enabledHDFS-1.1.1to2.1.0.html">Moving HAWQ Filespace to HA-enabled HDFS - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeReferenceInformation-1.1.1to2.1.0.html">Upgrade Reference Information - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="DisablingSecurityona1.1.1Cluster.html">Disabling Security on a 1.1.1 Cluster</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="AdministeringPHDUsingtheCLI.html">Administering PHD Using the CLI</a>
                     <ul>
                        <li>
                           <a href="ManagingaPHDCluster.html">Managing a PHD Cluster</a>
                           <ul>
                              <li>
                                 <a href="StartingaCluster.html">Starting a Cluster</a>
                              </li>
                              <li>
                                 <a href="StoppingaCluster.html">Stopping a Cluster</a>
                              </li>
                              <li>
                                 <a href="RestartingaCluster.html">Restarting a Cluster</a>
                              </li>
                              <li>
                                 <a href="ReconfiguringaCluster.html">Reconfiguring a Cluster</a>
                              </li>
                              <li>
                                 <a href="AddingRemovingServices.html">Adding/Removing Services</a>
                              </li>
                              <li>
                                 <a href="AddingHoststoaCluster.html">Adding Hosts to a Cluster</a>
                              </li>
                              <li>
                                 <a href="RetrievingInformationaboutaDeployedCluster.html">Retrieving Information about a Deployed Cluster</a>
                              </li>
                              <li>
                                 <a href="ListingClusters.html">Listing Clusters</a>
                              </li>
                              <li>
                                 <a href="ExpandingaCluster.html">Expanding a Cluster</a>
                              </li>
                              <li>
                                 <a href="ShrinkingaCluster.html">Shrinking a Cluster</a>
                              </li>
                              <li>
                                 <a href="DecommissioningSlaveNodes.html">Decommissioning Slave Nodes</a>
                                 <ul>
                                    <li>
                                       <a href="DecommissionNodesOverview.html">Decommission Nodes Overview</a>
                                    </li>
                                    <li>
                                       <a href="DecommissioningtheDataNode.html">Decommissioning the Data Node</a>
                                    </li>
                                    <li>
                                       <a href="DecommissioningtheYARNNodeManager.html">Decommissioning the YARN NodeManager</a>
                                    </li>
                                    <li>
                                       <a href="ShuttingDowntheSlaveNode.html">Shutting Down the Slave Node</a>
                                    </li>
                                    <li>
                                       <a href="ReplacingtheSlaveNode.html">Replacing the Slave Node</a>
                                    </li>
                                    <li>
                                       <a href="ReplacingtheSlaveNodeDisk.html">Replacing the Slave Node Disk</a>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="HighAvailability.html">High Availability</a>
                                 <ul>
                                    <li>
                                       <a href="DisablingHighAvailability.html">Disabling High Availability</a>
                                    </li>
                                    <li>
                                       <a href="EnablingRe-enablingHighAvailability.html">Enabling/Re-enabling High Availability</a>
                                    </li>
                                    <li>
                                       <a href="HighAvailabilityCommandReference.html">High Availability Command Reference</a>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="SecurityKerberosAuthentication.html">Security/Kerberos Authentication</a>
                                 <ul>
                                    <li>
                                       <a href="EnablingKerberosAuthentication.html">Enabling Kerberos Authentication</a>
                                    </li>
                                    <li>
                                       <a href="DisablingKerberosAuthentication.html">Disabling Kerberos Authentication</a>
                                    </li>
                                    <li>
                                       <a href="SecureModeCommands.html">Secure Mode Commands</a>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="UninstallingaCluster.html">Uninstalling a Cluster</a>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <a href="ManagingHAWQ.html">Managing HAWQ</a>
                           <ul>
                              <li>
                                 <a href="InitializingHAWQ.html">Initializing HAWQ</a>
                              </li>
                              <li>
                                 <a href="StartingHAWQ.html">Starting HAWQ</a>
                              </li>
                              <li>
                                 <a href="StoppingHAWQ.html">Stopping HAWQ</a>
                              </li>
                              <li>
                                 <a href="ModifyingHAWQUserConfiguration.html">Modifying HAWQ User Configuration</a>
                              </li>
                              <li>
                                 <a href="ExpandingHAWQ.html">Expanding HAWQ</a>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <a href="ManagingPHDRolesandHosts.html">Managing PHD Roles and Hosts</a>
                        </li>
                        <li>
                           <a href="PHDServicesReference.html">PHD Services Reference</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDFAQ-FrequentlyAskedQuestions.html">PHD FAQ - Frequently Asked Questions</a>
                  </li>
                  <li>
                     <a href="PHDTroubleshooting.html">PHD Troubleshooting</a>
                  </li>
                  <li>
                     <a href="PHDRESTAPIs.html">PHD REST APIs</a>
                     <ul>
                        <li>
                           <a href="SwaggerwithOAuth.html">Swagger with OAuth</a>
                        </li>
                        <li>
                           <a href="ListofPHDRESTAPIs.html">List of PHD REST APIs</a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="StackandToolsReference.html">Stack and Tools Reference</a>
               <ul>
                  <li>
                     <a href="OverviewofApacheStackandPivotalComponents.html">Overview of Apache Stack and Pivotal Components</a>
                  </li>
                  <li>
                     <a href="ManuallyInstallingandUsingPivotalHD2.1Stack.html">Manually Installing and Using Pivotal HD 2.1 Stack</a>
                     <ul>
                        <li>
                           <a href="DistributionContents.html">Distribution Contents</a>
                        </li>
                        <li>
                           <a href="ApacheConfigurationReference.html">Apache Configuration Reference</a>
                        </li>
                        <li>
                           <a href="AccessingPHD2.1.html">Accessing PHD 2.1</a>
                        </li>
                        <li>
                           <a href="HadoopHDFS.html">Hadoop HDFS</a>
                        </li>
                        <li>
                           <a href="HadoopYARN.html">Hadoop YARN</a>
                        </li>
                        <li>
                           <a href="HadoopPseudo-distributedConfiguration.html">Hadoop Pseudo-distributed Configuration</a>
                        </li>
                        <li>
                           <a href="Zookeeper.html">Zookeeper</a>
                        </li>
                        <li>
                           <a href="HBase.html">HBase</a>
                        </li>
                        <li>
                           <a href="Hive.html">Hive</a>
                        </li>
                        <li>
                           <a href="HCatalog.html">HCatalog</a>
                        </li>
                        <li>
                           <a href="Pig.html">Pig</a>
                        </li>
                        <li>
                           <a href="Mahout.html">Mahout</a>
                        </li>
                        <li>
                           <a href="Flume.html">Flume</a>
                        </li>
                        <li>
                           <a href="Sqoop.html">Sqoop</a>
                        </li>
                        <li>
                           <a href="Oozie.html">Oozie</a>
                        </li>
                        <li>
                           <a href="GraphLab.html">GraphLab</a>
                        </li>
                        <li>
                           <a href="Hamster.html">Hamster</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ManuallyUpgradingPivotalHDStacktoPHD2.1.html">Manually Upgrading Pivotal HD Stack to PHD 2.1</a>
                  </li>
                  <li>
                     <a href="PivotalHadoopEnhancements.html">Pivotal Hadoop Enhancements</a>
                  </li>
                  <li>
                     <a href="Security.html">Security</a>
                     <ul>
                        <li>
                           <a href="SecurityOverview.html">Security Overview</a>
                        </li>
                        <li>
                           <a href="KerberosSetup.html">Kerberos Setup</a>
                        </li>
                        <li>
                           <a href="LDAPSetup.html">LDAP Setup</a>
                        </li>
                        <li>
                           <a href="ConfiguringKerberosforHDFSandYARNMapReduce.html">Configuring Kerberos for HDFS and YARN (MapReduce)</a>
                        </li>
                        <li>
                           <a href="ConfiguringKerberosforHDFSHighAvailability.html">Configuring Kerberos for HDFS High Availability</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureZookeeper.html">Configuring Secure Zookeeper</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureHBase.html">Configuring Secure HBase</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureHive.html">Configuring Secure Hive</a>
                        </li>
                        <li>
                           <a href="ConfiguringHCatalogWebHCatonSecureHive.html">Configuring HCatalog (WebHCat) on Secure Hive</a>
                        </li>
                        <li>
                           <a href="ConfiguringHAWQonSecureHDFS.html">Configuring HAWQ on Secure HDFS</a>
                        </li>
                        <li>
                           <a href="EnablingAuditing.html">Enabling Auditing</a>
                        </li>
                        <li>
                           <a href="SecureWebAccess.html">Secure Web Access</a>
                        </li>
                        <li>
                           <a href="SecureWebAccessviaHttpFS.html">Secure Web Access via HttpFS</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureFlume.html">Configuring Secure Flume</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureOozie.html">Configuring Secure Oozie</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureSqoop.html">Configuring Secure Sqoop</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecurePig.html">Configuring Secure Pig</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureMahout.html">Configuring Secure Mahout</a>
                        </li>
                        <li>
                           <a href="Security-Troubleshooting.html">Security - Troubleshooting</a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
         </ul>

         <p class="productname"><a href="PivotalCommandCenter.html">Pivotal Command Center</a></p>
         <ul>
            <li>
               <a href="PCC2.3.0ReleaseNotes.html">PCC 2.3.0 Release Notes</a>
            </li>
            <li>
               <a href="PCCUserGuide.html">PCC User Guide</a>
               <ul>
                  <li>
                     <a href="PCCOverview.html">PCC Overview</a>
                  </li>
                  <li>
                     <a href="PCCInstallationPrerequisites.html">PCC Installation Prerequisites</a>
                     <ul>
                        <li>
                           <a href="BeforeYouBeginInstallingPCC.html">Before You Begin Installing PCC</a>
                        </li>
                        <li>
                           <a href="PCCPrerequisiteChecklist.html">PCC Prerequisite Checklist</a>
                        </li>
                        <li>
                           <a href="PCC-DNSLookup.html">PCC - DNS Lookup</a>
                        </li>
                        <li>
                           <a href="PCC-JAVAJDK.html">PCC - JAVA JDK</a>
                        </li>
                        <li>
                           <a href="PCC-VerifyPackageAccessibility.html">PCC - Verify Package Accessibility</a>
                        </li>
                        <li>
                           <a href="PCC-TurnOffiptables.html">PCC - Turn Off iptables</a>
                        </li>
                        <li>
                           <a href="PCC-DisableSELinux.html">PCC - Disable SELinux</a>
                        </li>
                        <li>
                           <a href="PCC-EPELYumRepository.html">PCC - EPEL Yum Repository</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="InstallationInstructions.html">Installation Instructions</a>
                     <ul>
                        <li>
                           <a href="SupportedPlatformsandBrowsers.html">Supported Platforms and Browsers</a>
                        </li>
                        <li>
                           <a href="PCCInstallationChecklist.html">PCC Installation Checklist</a>
                        </li>
                        <li>
                           <a href="InstallPCC.html">Install PCC</a>
                        </li>
                        <li>
                           <a href="PCC-ImportingthePackages.html">PCC - Importing the Packages</a>
                        </li>
                        <li>
                           <a href="LaunchingPCC.html">Launching PCC</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="UninstallingPCC.html">Uninstalling PCC</a>
                  </li>
                  <li>
                     <a href="UpgradingPCC.html">Upgrading PCC</a>
                  </li>
                  <li>
                     <a href="UsingPCC.html">Using PCC</a>
                     <ul>
                        <li>
                           <a href="PCCUIOverview.html">PCC UI Overview</a>
                        </li>
                        <li>
                           <a href="LoggingIn.html">Logging In</a>
                        </li>
                        <li>
                           <a href="PCCUISettings.html">PCC UI Settings</a>
                        </li>
                        <li>
                           <a href="PCCUIUserManagement.html">PCC UI User Management</a>
                        </li>
                        <li>
                           <a href="ClusterStatusPage.html">Cluster Status Page</a>
                        </li>
                        <li>
                           <a href="ConfiguringandDeployingaCluster.html">Configuring and Deploying a Cluster</a>
                           <ul>
                              <li>
                                 <a href="LaunchingtheAddClusterWizard.html">Launching the Add Cluster Wizard</a>
                              </li>
                              <li>
                                 <a href="CreateClusterDefinition.html">Create Cluster Definition</a>
                              </li>
                              <li>
                                 <a href="VersionsServicesandHosts.html">Versions, Services, and Hosts</a>
                              </li>
                              <li>
                                 <a href="HostVerification.html">Host Verification</a>
                              </li>
                              <li>
                                 <a href="ClusterTopology.html">Cluster Topology</a>
                              </li>
                              <li>
                                 <a href="ClusterConfiguration.html">Cluster Configuration</a>
                              </li>
                              <li>
                                 <a href="Validation.html">Validation</a>
                              </li>
                              <li>
                                 <a href="DeploymentStatus.html">Deployment Status</a>
                              </li>
                              <li>
                                 <a href="Summary.html">Summary</a>
                              </li>
                              <li>
                                 <a href="StartingtheClusterfromtheUI.html">Starting the Cluster from the UI</a>
                              </li>
                              <li>
                                 <a href="InitializingandConfiguringHAWQ.html">Initializing and Configuring HAWQ</a>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <a href="StartingStoppingandUninstallingaCluster.html">Starting, Stopping, and Uninstalling a Cluster</a>
                        </li>
                        <li>
                           <a href="PCCUIDashboard.html">PCC UI Dashboard</a>
                        </li>
                        <li>
                           <a href="ClusterAnalysis.html">Cluster Analysis</a>
                        </li>
                        <li>
                           <a href="MapReduceJobMonitor.html">MapReduce Job Monitor</a>
                        </li>
                        <li>
                           <a href="YarnAppMonitor.html">Yarn App Monitor</a>
                        </li>
                        <li>
                           <a href="HAWQQueryMonitor.html">HAWQ Query Monitor</a>
                        </li>
                        <li>
                           <a href="Topology.html">Topology</a>
                        </li>
                        <li>
                           <a href="Logs.html">Logs</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ConfiguringPCCforLDAP.html">Configuring PCC for LDAP</a>
                  </li>
                  <li>
                     <a href="CommandLineReference.html">Command Line Reference</a>
                  </li>
               </ul>
            </li>
         </ul>

         <p class="productname"><a href="PivotalHAWQ.html">Pivotal HAWQ</a></p>
         <ul>
            <li>
               <a href="HAWQ1.2.1ReleaseNotes.html">HAWQ 1.2.1 Release Notes</a>
            </li>
            <li>
               <a href="HAWQInstallationandUpgrade.html">HAWQ Installation and Upgrade</a>
               <ul>
                  <li>
                     <a href="PreparingtoInstallHAWQ.html">Preparing to Install HAWQ</a>
                  </li>
                  <li>
                     <a href="InstallingHAWQ.html">Installing HAWQ</a>
                  </li>
                  <li>
                     <a href="InstallingtheHAWQComponents.html">Installing the HAWQ Components</a>
                  </li>
                  <li>
                     <a href="UpgradingHAWQandComponents.html">Upgrading HAWQ and Components</a>
                  </li>
                  <li>
                     <a href="HAWQConfigurationParameterReference.html">HAWQ Configuration Parameter Reference</a>
                  </li>
               </ul>
            </li>
            <li>
               <a href="HAWQAdministration.html">HAWQ Administration</a>
               <ul>
                  <li>
                     <a href="HAWQOverview.html">HAWQ Overview</a>
                  </li>
                  <li>
                     <a href="HAWQQueryProcessing.html">HAWQ Query Processing</a>
                  </li>
                  <li>
                     <a href="UsingHAWQtoQueryData.html">Using HAWQ to Query Data</a>
                  </li>
                  <li>
                     <a href="UsingProceduralLanguages.html">Using Procedural Languages</a>
                  </li>
                  <li>
                     <a href="ConfiguringClientAuthentication.html">Configuring Client Authentication</a>
                  </li>
                  <li>
                     <a href="ConfiguringKerberosAuthentication.html">Configuring Kerberos Authentication</a>
                  </li>
                  <li>
                     <a href="ConfiguringLDAPAuthentication.html">Configuring LDAP Authentication</a>
                  </li>
                  <li>
                     <a href="BackingUpandRestoringHAWQDatabases.html">Backing Up and Restoring HAWQ Databases</a>
                  </li>
                  <li>
                     <a href="ExpandingtheHAWQSystem.html">Expanding the HAWQ System</a>
                  </li>
                  <li>
                     <a href="HAWQInputFormatforMapReduce.html">HAWQ InputFormat for MapReduce</a>
                  </li>
                  <li>
                     <a href="HAWQFilespacesandHighAvailabilityEnabledHDFS.html">HAWQ Filespaces and High Availability Enabled HDFS</a>
                  </li>
                  <li>
                     <a href="SQLCommandReference.html">SQL Command Reference</a>
                     <ul>
                        <li>
                           <a href="ABORT.html">ABORT</a>
                        </li>
                        <li>
                           <a href="ANALYZE.html">ANALYZE</a>
                        </li>
                        <li>
                           <a href="ALTERAGGREGATE.html">ALTER AGGREGATE</a>
                        </li>
                        <li>
                           <a href="ALTERFUNCTION.html">ALTER FUNCTION</a>
                        </li>
                        <li>
                           <a href="ALTEROPERATOR.html">ALTER OPERATOR</a>
                        </li>
                        <li>
                           <a href="ALTEROPERATORCLASS.html">ALTER OPERATOR CLASS</a>
                        </li>
                        <li>
                           <a href="ALTERROLE.html">ALTER ROLE</a>
                        </li>
                        <li>
                           <a href="ALTERTABLE.html">ALTER TABLE</a>
                        </li>
                        <li>
                           <a href="ALTERTABLESPACE.html">ALTER TABLESPACE</a>
                        </li>
                        <li>
                           <a href="ALTERTYPE.html">ALTER TYPE</a>
                        </li>
                        <li>
                           <a href="ALTERUSER.html">ALTER USER</a>
                        </li>
                        <li>
                           <a href="BEGIN.html">BEGIN</a>
                        </li>
                        <li>
                           <a href="CHECKPOINT.html">CHECKPOINT</a>
                        </li>
                        <li>
                           <a href="CLOSE.html">CLOSE</a>
                        </li>
                        <li>
                           <a href="COMMIT.html">COMMIT</a>
                        </li>
                        <li>
                           <a href="COPY.html">COPY</a>
                        </li>
                        <li>
                           <a href="CREATEAGGREGATE.html">CREATE AGGREGATE</a>
                        </li>
                        <li>
                           <a href="CREATEDATABASE.html">CREATE DATABASE</a>
                        </li>
                        <li>
                           <a href="CREATEEXTERNALTABLE.html">CREATE EXTERNAL TABLE</a>
                        </li>
                        <li>
                           <a href="CREATEFUNCTION.html">CREATE FUNCTION</a>
                        </li>
                        <li>
                           <a href="CREATEGROUP.html">CREATE GROUP</a>
                        </li>
                        <li>
                           <a href="CREATELANGUAGE.html">CREATE LANGUAGE</a>
                        </li>
                        <li>
                           <a href="CREATEOPERATOR.html">CREATE OPERATOR</a>
                        </li>
                        <li>
                           <a href="CREATEOPERATORCLASS.html">CREATE OPERATOR CLASS</a>
                        </li>
                        <li>
                           <a href="CREATERESOURCEQUEUE.html">CREATE RESOURCE QUEUE</a>
                        </li>
                        <li>
                           <a href="CREATEROLE.html">CREATE ROLE</a>
                        </li>
                        <li>
                           <a href="CREATESCHEMA.html">CREATE SCHEMA</a>
                        </li>
                        <li>
                           <a href="CREATESEQUENCE.html">CREATE SEQUENCE</a>
                        </li>
                        <li>
                           <a href="CREATETABLE.html">CREATE TABLE</a>
                        </li>
                        <li>
                           <a href="CREATETABLEAS.html">CREATE TABLE AS</a>
                        </li>
                        <li>
                           <a href="CREATETABLESPACE.html">CREATE TABLESPACE</a>
                        </li>
                        <li>
                           <a href="CREATETYPE.html">CREATE TYPE</a>
                        </li>
                        <li>
                           <a href="CREATEUSER.html">CREATE USER</a>
                        </li>
                        <li>
                           <a href="CREATEVIEW.html">CREATE VIEW</a>
                        </li>
                        <li>
                           <a href="DEALLOCATE.html">DEALLOCATE</a>
                        </li>
                        <li>
                           <a href="DECLARE.html">DECLARE</a>
                        </li>
                        <li>
                           <a href="DROPAGGREGATE.html">DROP AGGREGATE</a>
                        </li>
                        <li>
                           <a href="DROPDATABASE.html">DROP DATABASE</a>
                        </li>
                        <li>
                           <a href="DROPEXTERNALTABLE.html">DROP EXTERNAL TABLE</a>
                        </li>
                        <li>
                           <a href="DROPFILESPACE.html">DROP FILESPACE</a>
                        </li>
                        <li>
                           <a href="DROPFUNCTION.html">DROP FUNCTION</a>
                        </li>
                        <li>
                           <a href="DROPGROUP.html">DROP GROUP</a>
                        </li>
                        <li>
                           <a href="DROPOPERATOR.html">DROP OPERATOR</a>
                        </li>
                        <li>
                           <a href="DROPOPERATORCLASS.html">DROP OPERATOR CLASS</a>
                        </li>
                        <li>
                           <a href="DROPOWNED.html">DROP OWNED</a>
                        </li>
                        <li>
                           <a href="DROPRESOURCEQUEUE.html">DROP RESOURCE QUEUE</a>
                        </li>
                        <li>
                           <a href="DROPROLE.html">DROP ROLE</a>
                        </li>
                        <li>
                           <a href="DROPSCHEMA.html">DROP SCHEMA</a>
                        </li>
                        <li>
                           <a href="DROPSEQUENCE.html">DROP SEQUENCE</a>
                        </li>
                        <li>
                           <a href="DROPTABLE.html">DROP TABLE</a>
                        </li>
                        <li>
                           <a href="DROPTABLESPACE.html">DROP TABLESPACE</a>
                        </li>
                        <li>
                           <a href="DROPTYPE.html">DROP TYPE</a>
                        </li>
                        <li>
                           <a href="DROPUSER.html">DROP USER</a>
                        </li>
                        <li>
                           <a href="DROPVIEW.html">DROP VIEW</a>
                        </li>
                        <li>
                           <a href="END.html">END</a>
                        </li>
                        <li>
                           <a href="EXECUTE.html">EXECUTE</a>
                        </li>
                        <li>
                           <a href="EXPLAIN.html">EXPLAIN</a>
                        </li>
                        <li>
                           <a href="FETCH.html">FETCH</a>
                        </li>
                        <li>
                           <a href="GRANT.html">GRANT</a>
                        </li>
                        <li>
                           <a href="INSERT.html">INSERT</a>
                        </li>
                        <li>
                           <a href="PREPARE.html">PREPARE</a>
                        </li>
                        <li>
                           <a href="REASSIGNOWNED.html">REASSIGN OWNED</a>
                        </li>
                        <li>
                           <a href="RELEASESAVEPOINT.html">RELEASE SAVEPOINT</a>
                        </li>
                        <li>
                           <a href="RESET.html">RESET</a>
                        </li>
                        <li>
                           <a href="REVOKE.html">REVOKE</a>
                        </li>
                        <li>
                           <a href="ROLLBACK.html">ROLLBACK</a>
                        </li>
                        <li>
                           <a href="ROLLBACKTOSAVEPOINT.html">ROLLBACK TO SAVEPOINT</a>
                        </li>
                        <li>
                           <a href="SAVEPOINT.html">SAVEPOINT</a>
                        </li>
                        <li>
                           <a href="SELECT.html">SELECT</a>
                        </li>
                        <li>
                           <a href="SELECTINTO.html">SELECT INTO</a>
                        </li>
                        <li>
                           <a href="SET.html">SET</a>
                        </li>
                        <li>
                           <a href="SETROLE.html">SET ROLE</a>
                        </li>
                        <li>
                           <a href="SETSESSIONAUTHORIZATION.html">SET SESSION AUTHORIZATION</a>
                        </li>
                        <li>
                           <a href="SHOW.html">SHOW</a>
                        </li>
                        <li>
                           <a href="TRUNCATE.html">TRUNCATE</a>
                        </li>
                        <li>
                           <a href="VACUUM.html">VACUUM</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ManagementUtilityReference.html">Management Utility Reference</a>
                     <ul>
                        <li>
                           <a href="gpactivatestandby.html">gpactivatestandby</a>
                        </li>
                        <li>
                           <a href="gpcheckperf.html">gpcheckperf</a>
                        </li>
                        <li>
                           <a href="gpconfig.html">gpconfig</a>
                        </li>
                        <li>
                           <a href="gpexpand.html">gpexpand</a>
                        </li>
                        <li>
                           <a href="gpextract.html">gpextract</a>
                        </li>
                        <li>
                           <a href="gpfdist.html">gpfdist</a>
                        </li>
                        <li>
                           <a href="gpfilespace.html">gpfilespace</a>
                        </li>
                        <li>
                           <a href="gpinitstandby.html">gpinitstandby</a>
                        </li>
                        <li>
                           <a href="gpinitsystem.html">gpinitsystem</a>
                        </li>
                        <li>
                           <a href="gpload.html">gpload</a>
                        </li>
                        <li>
                           <a href="gplogfilter.html">gplogfilter</a>
                        </li>
                        <li>
                           <a href="gprecoverseg.html">gprecoverseg</a>
                        </li>
                        <li>
                           <a href="gpscp.html">gpscp</a>
                        </li>
                        <li>
                           <a href="gpstart.html">gpstart</a>
                        </li>
                        <li>
                           <a href="gpssh.html">gpssh</a>
                        </li>
                        <li>
                           <a href="gssh-exkeys.html">gssh-exkeys</a>
                        </li>
                        <li>
                           <a href="gpstate.html">gpstate</a>
                        </li>
                        <li>
                           <a href="gpstop.html">gpstop</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ClientUtilityReference.html">Client Utility Reference</a>
                     <ul>
                        <li>
                           <a href="createdb.html">createdb</a>
                        </li>
                        <li>
                           <a href="createlang.html">createlang</a>
                        </li>
                        <li>
                           <a href="createuser.html">createuser</a>
                        </li>
                        <li>
                           <a href="dropdb.html">dropdb</a>
                        </li>
                        <li>
                           <a href="dropuser.html">dropuser</a>
                        </li>
                        <li>
                           <a href="pg_dump.html">pg_dump</a>
                        </li>
                        <li>
                           <a href="pg_dumpall.html">pg_dumpall</a>
                        </li>
                        <li>
                           <a href="pg_restore.html">pg_restore</a>
                        </li>
                        <li>
                           <a href="psql.html">psql</a>
                        </li>
                        <li>
                           <a href="vacuumdb.html">vacuumdb</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="HAWQServerConfigurationParameters.html">HAWQ Server Configuration Parameters</a>
                  </li>
                  <li>
                     <a href="CharacterSetSupportReference.html">Character Set Support Reference</a>
                  </li>
                  <li>
                     <a href="HAWQEnvironmentVariables.html">HAWQ Environment Variables</a>
                  </li>
                  <li>
                     <a href="HAWQDataTypes.html">HAWQ Data Types</a>
                  </li>
                  <li>
                     <a href="SystemCatalogReference.html">System Catalog Reference</a>
                  </li>
                  <li>
                     <a href="hawq_toolkitReference.html">hawq_toolkit Reference</a>
                  </li>
                  <li>
                     <a href="ManagingHAWQLogFiles.html">Managing HAWQ Log Files</a>
                  </li>
               </ul>
            </li>
            <li>
               <a href="PivotalExtensionFrameworkPXF.html">Pivotal Extension Framework (PXF)</a>
               <ul>
                  <li>
                     <a href="PXFInstallationandAdministration.html">PXF Installation and Administration</a>
                  </li>
                  <li>
                     <a href="PXFExternalTableandAPIReference.html">PXF External Table and API Reference</a>
                  </li>
               </ul>
            </li>
         </ul>

</div>
   
	<!-- end INSERT SIDENAV -->
	
	<main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container">Running PHD Sample Programs</h1>
          <div id="js-quick-links"></div>          
        
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>     
        
		<!-- Python script replaces main content -->
		<div style="visibility:hidden; height:2px;">Pivotal Product Documentation : Running PHD Sample Programs</div><div class="wiki-content group" id="main-content">
<p>Make sure you are logged in as user<code>gpadmin</code>on the appropriate host before testing the service.</p><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1410924372089 {padding: 0px;}
div.rbtoc1410924372089 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1410924372089 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1410924372089">
<ul class="toc-indentation">
<li><a href="#RunningPHDSamplePrograms-TestingHadoop">Testing Hadoop</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingYARN">Testing YARN</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingZookeeper">Testing Zookeeper</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingHBaseandZooKeeper">Testing HBase and ZooKeeper</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingHAWQ">Testing HAWQ</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingPig">Testing Pig</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingHive">Testing Hive</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingHcatalog">Testing Hcatalog</a>
<ul class="toc-indentation">
<li><a href="#RunningPHDSamplePrograms-UsingHCatalogCommand-lineAPI">Using HCatalog Command-line API</a></li>
<li><a href="#RunningPHDSamplePrograms-UsingHCatalogwithREST">Using HCatalog with REST</a></li>
<li><a href="#RunningPHDSamplePrograms-UsingHCatalogwithPig">Using HCatalog with Pig</a></li>
</ul>
</li>
<li><a href="#RunningPHDSamplePrograms-TestingOozie">Testing Oozie</a>
<ul class="toc-indentation">
<li><a href="#RunningPHDSamplePrograms-SubmitOozieExampleWorkflows">Submit Oozie Example Workflows</a></li>
</ul>
</li>
<li><a href="#RunningPHDSamplePrograms-TestingSqoop">Testing Sqoop</a>
<ul class="toc-indentation">
<li><a href="#RunningPHDSamplePrograms-SqoopClientExample">Sqoop ClientExample</a></li>
</ul>
</li>
<li><a href="#RunningPHDSamplePrograms-TestingFlume">Testing Flume</a>
<ul class="toc-indentation">
<li><a href="#RunningPHDSamplePrograms-FlumeConfigurationExample">Flume Configuration Example</a></li>
<li><a href="#RunningPHDSamplePrograms-Starting/StoppingFlume">Starting/Stopping Flume</a></li>
<li><a href="#RunningPHDSamplePrograms-VerifyingtheInstallation">Verifying the Installation</a></li>
</ul>
</li>
<li><a href="#RunningPHDSamplePrograms-TestingMahout">Testing Mahout</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingPXF">Testing PXF</a>
<ul class="toc-indentation">
<li><a href="#RunningPHDSamplePrograms-TestingPXFonHive">Testing PXF on Hive</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingPXFonHBase">Testing PXF on HBase</a></li>
<li><a href="#RunningPHDSamplePrograms-TestingPXFonHDFS">Testing PXF on HDFS</a></li>
</ul>
</li>
</ul>
</div></p><h2 id="RunningPHDSamplePrograms-TestingHadoop">Testing Hadoop</h2><p>You can run Hadoop commands from any configured Hadoop nodes.<br/>You can run MapReduce jobs from the DataNodes, resource manager, or historyserver.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># clear input directory, if any |

$ hadoop fs -rmr /tmp/test_input

# create input directory
$ hadoop fs -mkdir /tmp/test_input

# ensure output directory does not exist
$ hadoop fs -rmr /tmp/test_output

# copy some file having text data to run word count on
$ hadoop fs -copyFromLocal /usr/lib/gphd/hadoop/CHANGES.txt /tmp/test_input

# run word count
$ hadoop jar /usr/lib/gphd/hadoop-mapreduce/hadoop-mapreduce-examples-&lt;version&gt;.jar wordcount /tmp/test_input /tmp/test_output

# dump output on console
$ hadoop fs -cat /tmp/test_output/part*
</pre>
</div></div> <div class="aui-message warning shadowed information-macro">
<span class="aui-icon icon-warning">Icon</span>
<div class="message-content">
<p>When you run a MapReduce job as a custom user, <em>not</em> as <code>gpadmin</code>, <code>hdfs</code>, <code>mapred</code>, or <code>hbase</code>, note the following:</p><ul><li>Make sure the appropriate user staging directory exists.</li></ul><ul><li>Set permissions on<code> yarn.nodemanager.remote-app-log-dir</code> to 777. For example, if it is set to the default value <code>/yarn/apps,</code> do the following:</li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo -u hdfs hadoop fs -chmod 777 /yarn/apps
</pre>
</div></div><ul><li>Ignore the Exception trace, this is a known Apache Hadoop issue.</li></ul>
</div>
</div>
<h2 id="RunningPHDSamplePrograms-TestingYARN">Testing YARN</h2><pre></pre><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">Run a yarn job (Pi job):

yarn jar /usr/lib/gphd/hadoop-mapreduce/hadoop-mapreduce-examples-2.2.0-gphd-3.1.0.0.jar pi 2 2

List all jobs with their status:

sudo -u hadoop yarn application -list
14/07/25 11:05:24 INFO client.RMProxy: Connecting to ResourceManager at centos64-2.localdomain/192.168.2.202:8032
Total number of applications (application-types: [] and states: [SUBMITTED, ACCEPTED, RUNNING]):1
                Application-Id      Application-Name        Application-Type          User           Queue                   State             Final-State         Progress                         Tracking-URL
application_1406286051207_0001       QuasiMonteCarlo               MAPREDUCE       gpadmin         default                 RUNNING               UNDEFINED               5%               http://centos64-2:7017


[gpadmin@centos64-2 ~]$ sudo -u hadoop yarn application -status application_1406286051207_0001
14/07/25 11:05:36 INFO client.RMProxy: Connecting to ResourceManager at centos64-2.localdomain/192.168.2.202:8032
Application Report :
        Application-Id : application_1406286051207_0001
        Application-Name : QuasiMonteCarlo
        Application-Type : MAPREDUCE
        User : gpadmin
        Queue : default
        Start-Time : 1406286289246
        Finish-Time : 0
        Progress : 5%
        State : RUNNING
        Final-State : UNDEFINED
        Tracking-URL : http://centos64-2:7017
        RPC Port : 21905
        AM Host : centos64-2
        Diagnostics :
[gpadmin@centos64-2 ~]$</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingZookeeper">Testing Zookeeper</h2><p>To test zookeeper, first make sure that zookeeper is ruuning. From any of the client nodes use below commands to check zookeeper :</p><p>ZooKeeper responds to a small set of commands. Each command is composed of four letters. You issue the commands to ZooKeeper via telnet or nc, at the client port.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">ZooKeeper Commands: The Four Letter Words 

[gpadmin@centos64-3 ~]$ echo ruok | nc localhost 2181
imok[gpadmin@centos64-3 ~]$
[gpadmin@centos64-3 ~]$ echo dump | nc localhost 2181
SessionTracker dump:
org.apache.zookeeper.server.quorum.LearnerSessionTracker@4ed78fd5
ephemeral nodes dump:
Sessions with Ephemerals (3):
0x1478ff8e66e0001:
        /hadoop-ha/test/ActiveStandbyElectorLock
0x1478ff8e66e0002:
        /hbase/master
        /hbase/tokenauth/keymaster
0x2478ff8e67c0001:
        /hbase/rs/centos64-3.localdomain,60020,1406869842986
[gpadmin@centos64-3 ~]$
[gpadmin@centos64-3 ~]$
[gpadmin@centos64-3 ~]$ echo envi | nc localhost 2181
Environment:
zookeeper.version=3.4.5--1, built on 07/03/2014 06:24 GMT
host.name=centos64-3.localdomain
java.version=1.7.0_15
java.vendor=Oracle Corporation
java.home=/usr/java/jdk1.7.0_15/jre
java.class.path=/usr/lib/gphd/zookeeper/bin/../build/classes:/usr/lib/gphd/zookeeper/bin/../build/lib/*.jar:/usr/lib/gphd/zookeeper/bin/../lib/slf4j-log4j12-1.6.1.jar:/usr/lib/gphd/zookeeper/bin/../lib/slf4j-api-1.6.1.jar:/usr/lib/gphd/zookeeper/bin/../lib/netty-3.2.2.Final.jar:/usr/lib/gphd/zookeeper/bin/../lib/log4j-1.2.16.jar:/usr/lib/gphd/zookeeper/bin/../lib/jline-0.9.94.jar:/usr/lib/gphd/zookeeper/bin/../zookeeper-3.4.5-gphd-3.1.0.0.jar:/usr/lib/gphd/zookeeper/bin/../src/java/lib/*.jar:/etc/gphd/zookeeper/conf::/etc/gphd/zookeeper/conf:/usr/lib/gphd/zookeeper/zookeeper-3.4.5-gphd-3.1.0.0.jar:/usr/lib/gphd/zookeeper/zookeeper.jar:/usr/lib/gphd/zookeeper/lib/log4j-1.2.16.jar:/usr/lib/gphd/zookeeper/lib/netty-3.2.2.Final.jar:/usr/lib/gphd/zookeeper/lib/slf4j-log4j12-1.6.1.jar:/usr/lib/gphd/zookeeper/lib/jline-0.9.94.jar:/usr/lib/gphd/zookeeper/lib/slf4j-api-1.6.1.jar
java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
java.io.tmpdir=/tmp
java.compiler=&lt;NA&gt;
os.name=Linux
os.arch=amd64
os.version=2.6.32-358.el6.x86_64
user.name=zookeeper
user.home=/home/zookeeper
user.dir=/home/gpadmin
[gpadmin@centos64-3 ~]$ echo stat | nc localhost 2181
Zookeeper version: 3.4.5--1, built on 07/03/2014 06:24 GMT
Clients:
 /192.168.2.203:5044[1](queued=0,recved=2842,sent=2842)
 /192.168.2.202:4723[1](queued=0,recved=1186,sent=1212)
 /0:0:0:0:0:0:0:1:18798[0](queued=0,recved=1,sent=0)
 /192.168.2.203:5058[1](queued=0,recved=364,sent=364)

Latency min/avg/max: 0/1/1676
Received: 4672
Sent: 4697
Connections: 4
Outstanding: 0
Zxid: 0x1800000040
Mode: follower
Node count: 53
[gpadmin@centos64-3 ~]$
[gpadmin@centos64-3 ~]$




</pre>
</div></div><p></p><h2 id="RunningPHDSamplePrograms-TestingHBaseandZooKeeper">Testing HBase and ZooKeeper</h2><p>You can test HBase from the HBase master node:</p><p>To test zookeeper, from HBase shell you can run command zk_dump</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">gpadmin# ./bin/hbase shell
hbase(main):003:0&gt; create 'test', 'cf'
0 row(s) in 1.2200 seconds
hbase(main):003:0&gt; list 'test'
..
1 row(s) in 0.0550 seconds
hbase(main):004:0&gt; put 'test', 'row1', 'cf:a', 'value1'
0 row(s) in 0.0560 seconds
hbase(main):005:0&gt; put 'test', 'row2', 'cf:b', 'value2'
0 row(s) in 0.0370 seconds
hbase(main):006:0&gt; put 'test', 'row3', 'cf:c', 'value3'
0 row(s) in 0.0450 seconds

hbase(main):007:0&gt; scan 'test'
ROW COLUMN+CELL
row1 column=cf:a, timestamp=1288380727188, value=value1
row2 column=cf:b, timestamp=1288380738440, value=value2
row3 column=cf:c, timestamp=1288380747365, value=value3
3 row(s) in 0.0590 seconds

hbase(main):012:0&gt; disable 'test'
0 row(s) in 1.0930 seconds
hbase(main):013:0&gt; drop 'test'
0 row(s) in 0.0770 seconds

hbase(main):002:0&gt; zk_dump
HBase is rooted at /hbase
Active master address: centos64-2.localdomain,60000,1406799746730
Backup master addresses:
Region server holding hbase:meta: centos64-3.localdomain,60020,1406799753532
Region servers:
 centos64-2.localdomain,60020,1406799754233
 centos64-3.localdomain,60020,1406799753532
 centos64-4.localdomain,60020,1406799751248
/hbase/replication:
/hbase/replication/peers:
/hbase/replication/rs:
/hbase/replication/rs/centos64-4.localdomain,60020,1406799751248:
/hbase/replication/rs/centos64-3.localdomain,60020,1406799753532:
/hbase/replication/rs/centos64-2.localdomain,60020,1406799754233:
Quorum Server Statistics:
 centos64-3.localdomain:2181
  Zookeeper version: 3.4.5--1, built on 04/14/2014 03:32 GMT
  Clients:
   /192.168.2.202:24969[1](queued=0,recved=153,sent=153)
   /192.168.2.203:61845[1](queued=0,recved=150,sent=150)
   /192.168.2.202:24955[1](queued=0,recved=457,sent=488)
   /192.168.2.204:40463[1](queued=0,recved=150,sent=150)
   /192.168.2.204:40460[1](queued=0,recved=174,sent=177)
   /192.168.2.202:24968[1](queued=0,recved=181,sent=181)
   /192.168.2.202:25189[0](queued=0,recved=1,sent=0)

  Latency min/avg/max: 0/3/2432
  Received: 1266
  Sent: 1299
  Connections: 7
  Outstanding: 0
  Zxid: 0x10000006f
  Mode: follower
  Node count: 38
 centos64-2.localdomain:2181
  Zookeeper version: 3.4.5--1, built on 04/14/2014 03:32 GMT
  Clients:
   /192.168.2.202:21459[1](queued=0,recved=16,sent=16)
   /192.168.2.202:21458[1](queued=0,recved=5,sent=5)
   /192.168.2.203:13881[1](queued=0,recved=151,sent=151)
   /192.168.2.202:21462[0](queued=0,recved=1,sent=0)

  Latency min/avg/max: 0/6/720
  Received: 226
  Sent: 225
  Connections: 4
  Outstanding: 0
  Zxid: 0x10000006f
  Mode: follower
  Node count: 38
 centos64-4.localdomain:2181
  Zookeeper version: 3.4.5--1, built on 04/14/2014 03:32 GMT
  Clients:
   /192.168.2.203:40472[1](queued=0,recved=196,sent=198)
   /192.168.2.202:19701[1](queued=0,recved=189,sent=191)
   /192.168.2.202:19931[0](queued=0,recved=1,sent=0)
   /192.168.2.202:19712[1](queued=0,recved=150,sent=150)
   /192.168.2.202:19710[1](queued=0,recved=151,sent=151)
   /192.168.2.204:47427[1](queued=0,recved=150,sent=150)

  Latency min/avg/max: 0/0/27
  Received: 872
  Sent: 875
  Connections: 6
  Outstanding: 0
  Zxid: 0x10000006f
  Mode: leader
  Node count: 38

hbase(main):003:0&gt;

</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingHAWQ">Testing HAWQ</h2> <div class="aui-message warning shadowed information-macro">
<span class="aui-icon icon-warning">Icon</span>
<div class="message-content">
<p>Use the HAWQ Master node to run HAWQ tests.</p>
</div>
</div>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">gpadmin# source /usr/local/hawq/greenplum_path.sh

gpadmin# psql -p 5432
psql (8.2.15)
Type "help" for help.

gpadmin=# \d
No relations found.
gpadmin=# \l
List of databases
Name | Owner | Encoding | Access privileges
---{}----+------------
gpadmin | gpadmin | UTF8 |
postgres | gpadmin | UTF8 |
template0 | gpadmin | UTF8 |
template1 | gpadmin | UTF8 |
(4 rows)

gpadmin=# \c gpadmin
You are now connected to database "gpadmin" as user "gpadmin".
gpadmin=# create table test (a int, b text);
NOTICE: Table doesn't have 'DISTRIBUTED BY' clause 
Using column named 'a' as the Greenplum Database data
distribution key for this table.
HINT: The 'DISTRIBUTED BY' clause determines the distribution
of data. Make sure column(s) chosen are the optimal data
distribution key to minimize skew.

CREATE TABLE

gpadmin=# insert into test values (1, '435252345');
INSERT 0 1
gpadmin=# select * from test;
a | b
-+---------
1 | 435252345
(1 row)

gpadmin=#
</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingPig">Testing Pig</h2><p>You can test Pig from the client node:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Clean up input/output directories

hadoop fs -rmr /tmp/test_pig_input
hadoop fs -rmr /tmp/test_pig_output

#Create input directory

hadoop fs -mkdir /tmp/test_pig_input

# Copy data from /etc/passwd

hadoop fs -copyFromLocal /etc/passwd /tmp/test_pig_input
</pre>
</div></div><p>In the grunt shell, run this simple Pig job:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ pig // Enter grunt shell
A = LOAD '/tmp/test_pig_input' using PigStorage(':');
B = FILTER A by $2 &gt; 0;
C = GROUP B ALL;
D = FOREACH C GENERATE group, COUNT(B);
STORE D into '/tmp/test_pig_output';

# Displaying output

hadoop fs -cat /tmp/test_pig_output/part*

Cleaning up input and output'

hadoop fs -rmr /tmp/test_pig_*
</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingHive">Testing Hive</h2><p>Test Hive from the client node:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">gpadmin# hive

# Creating passwords table
hive&gt; create table passwords (col0 string, col1 string, col2 string, col3 string, col4 string, col5 string, col6 string) ROW FORMAT DELIMITED FIELDS TERMINATED BY ":";
hive&gt; SHOW TABLES;
hive&gt; DESCRIBE passwords;

# Loading data
hive&gt; load data local inpath "/etc/passwd" into table passwords;

# Running a Hive query involving grouping and counts
hive&gt; select col3,count(*) from passwords where col2 &gt; 0 group by col3;

# Cleaning up passwords table
hive&gt; DROP TABLE passwords;
hive&gt; quit;</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingHcatalog">Testing Hcatalog</h2><h3 id="RunningPHDSamplePrograms-UsingHCatalogCommand-lineAPI">Using HCatalog Command-line API</h3><p>We can use following HCatalog command-line to create a table and access table data:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Create a table
$ hcat -e "CREATE TABLE test(key string, value string) ROW FORMAT DELIMITED FIELDS TERMINATED BY ','"
OK

# Get the scheme for a table
$ hcat -e "DESC test"
OK
key   string none
value string none</pre>
</div></div><p><strong>Note:</strong> Make sure the user is permitted to read the file (e.g., 'test_data') and write the table (e.g., 'test'), and the YARN service is up.</p><h3 id="RunningPHDSamplePrograms-UsingHCatalogwithREST">Using HCatalog with REST</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Get table by using webhcat, you need to change hostname and username to appropriate value
$ curl -s 'http://&lt;hostname&gt;:50111/templeton/v1/ddl/database/default/table/test?user.name=username'
{"columns":[{"name":"key","type":"string"},{"name":"value","type":"string"}],"database":"default","table":"test"}</pre>
</div></div><h3 id="RunningPHDSamplePrograms-UsingHCatalogwithPig">Using HCatalog with Pig</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ pig -useHCatalog
#use HCatLoader to have table schema retrieved automatically
$grunt&gt; A = LOAD 'test' USING org.apache.hcatalog.pig.HCatLoader(); 
$grunt&gt; DESCRIBE A;
#output
A: {key: chararray,value: chararray}</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingOozie">Testing Oozie</h2><h3 id="RunningPHDSamplePrograms-SubmitOozieExampleWorkflows">Submit Oozie Example Workflows</h3><ol><li><p>Expand the examples:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ mkdir /tmp/oozie-example
$ cd /tmp/oozie-example
$ tar xzf /usr/lib/gphd/oozie/oozie-examples.tar.gz</pre>
</div></div></li><li><p>Change the job properties in the examples.<br/>Change the following files:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">/tmp/oozie-example/examples/apps/map-reduce/job.properties
/tmp/oozie-example/examples/apps/hive/job.properties
/tmp/oozie-example/examples/apps/pig/job.properties</pre>
</div></div><p>In each file, set the following properties:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">nameNode=hdfs://&lt;namenode-host&gt;:&lt;namenode-port&gt;
jobTracker=&lt;resource-manager-host&gt;:&lt;resource-manager-port&gt;</pre>
</div></div><p>Use the exact hostname and service port in your cluster.</p><p></p></li><li>Edit the Oozie <code>workflow.xml</code> as follows:<br/><p>The Oozie <code>workflow.xml</code> is in the following directory:</p><p><code>/tmp/oozie-example/examples/apps/hive</code></p><p>Add the NameNode variable as a prefix to all paths, for example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">&lt;param&gt;INPUT=${nameNode}/user/${wf:user()}/${examplesRoot}/input-data/table&lt;/param&gt;
&lt;param&gt;OUTPUT=${nameNode}/user/${wf:user()}/${examplesRoot}/output-data/hive&lt;/param&gt;</pre>
</div></div><div><div class="syntaxhighlighter nogutter java"><p></p></div></div><p>Also make sure to reference the<code>hive-oozie-site.xml</code>using the<code>job-xml</code>tag in the workflow. The<code>&lt;job-xml&gt;</code> element needs to be put inside the <code>&lt;hive&gt;</code>element between the<code>&lt;prepare&gt;</code>and<code>&lt;configuration&gt;</code>elements in the <code>examples/apps/hive/workflow.</code> <code>xml</code>file, as shown below:</p><div><div class="syntaxhighlighter nogutter java"><p></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">&lt;workflow-app xmlns="uri:oozie:workflow:0.2" name="hive-wf"&gt;
    &lt;start to="hive-node"/&gt;
    &lt;action name="hive-node"&gt;
        &lt;hive xmlns="uri:oozie:hive-action:0.2"&gt;
            &lt;job-tracker&gt;${jobTracker}&lt;/job-tracker&gt;
            &lt;name-node&gt;${nameNode}&lt;/name-node&gt;
            &lt;prepare&gt;
                &lt;delete path="${nameNode}/user/${wf:user()}/${examplesRoot}/output-data/hive"/&gt;
                &lt;mkdir path="${nameNode}/user/${wf:user()}/${examplesRoot}/output-data"/&gt;
            &lt;/prepare&gt;
            &lt;job-xml&gt;${nameNode}/user/oozie/hive-oozie-site.xml&lt;/job-xml&gt;
            &lt;configuration&gt;
                &lt;property&gt;
                    &lt;name&gt;mapred.job.queue.name&lt;/name&gt;
                    &lt;value&gt;${queueName}&lt;/value&gt;
                &lt;/property&gt;
            &lt;/configuration&gt;
            &lt;script&gt;script.q&lt;/script&gt;
            &lt;param&gt;INPUT=${nameNode}/user/${wf:user()}/${examplesRoot}/input-data/table&lt;/param&gt;
            &lt;param&gt;OUTPUT=${nameNode}/user/${wf:user()}/${examplesRoot}/output-data/hive&lt;/param&gt;
        &lt;/hive&gt;
        &lt;ok to="end"/&gt;
        &lt;error to="fail"/&gt;
    &lt;/action&gt;
    &lt;kill name="fail"&gt;
        &lt;message&gt;Hive failed, error message[${wf:errorMessage(wf:lastErrorNode())}]&lt;/message&gt;
    &lt;/kill&gt;
    &lt;end name="end"/&gt;
&lt;/workflow-app&gt;</pre>
</div></div></div></div></li><li><p>Put example code onto HDFS:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ hdfs dfs -put examples /user/&lt;username&gt;</pre>
</div></div><p>Where <code>&lt;username&gt;</code> is the name of user who issues this command.</p><p></p></li><li>Submit a map reduce example workflow<ol><li><p>Submit workflow:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ oozie job -oozie http://localhost:11000/oozie -config examples/apps/map-reduce/job.properties  -run
job: &lt;oozie-job-id&gt;</pre>
</div></div></li><li><p>Check workflow status. <br/>Where <code>&lt;oozie-job-id&gt;</code> is the same id in the output of the last command.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ oozie job -oozie http://localhost:11000/oozie -info &lt;oozie-job-id&gt;</pre>
</div></div></li></ol></li><li>Oozie Setup for Hive:<br/> <br/><ol><li><p>Remote Metastore Mode (recommended):<br/> <br/>Put the Hive jars into the Tomcat class loader path. Make the following change in the<code> /var/lib/gphd/oozie/tomcat-deployment/conf/catalina.properties</code> file:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">common.loader=${catalina.home}/lib,${catalina.home}/lib/*.jar,/var/lib/gphd/oozie/*.jar,/usr/lib/gphd/oozie/libtools/*.jar,/usr/lib/gphd/oozie/oozie-core/*.jar,/usr/lib/gphd/hadoop/client/*.jar,/usr/lib/gphd/hive/lib/*.jar</pre>
</div></div> <div class="aui-message warning shadowed information-macro">
<p class="title">common loader classpath</p>
<span class="aui-icon icon-warning">Icon</span>
<div class="message-content">
<p>Make sure<code> ${catalina.home}/lib,${catalina.home}/lib/*.jar</code> are at the beginning of the classpath. Keep the jars in the classpath as the following order.</p><p>-Tomcat Jars (the jars under<code> ${catalina.home}/lib</code>)</p><p>-Oozie Jars (the jars under <code>${oozie.home}, ${oozie.home}/libtools, ${oozie.home}/oozie-core</code>)</p><p>-Hadoop Jars (the jars under<code> ${hadoop.home}/client/</code>)</p><p>-Hive Jars (the jars under <code>${hive.home}/lib</code>)</p>
</div>
</div>
</li><li><p>Local Metastore Mode:<br/> <br/> Upload the JDBC driver to Oozie sharelib <br/> <br/>To enable the local metastore mode, comment out the<code>hive.metastore.uris</code>property and verify that Hive still works properly at the command-line.In local metastore mode, Oozie hive actions do not connect to the Hive Metastore, but instead talk to the database directly. In this setup, the appropriate JDBC driver (for example, for Postgres) needs to be made available to hive jobs running within Oozie:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">sudo -u oozie hdfs dfs -put /usr/lib/gphd/hive/lib/postgresql-jdbc.jar /user/oozie/share/lib/hive</pre>
</div></div></li></ol></li><li>Submit the Hive example workflow.<br/> <br/><ol><li><p>Upload the Hive configuration file onto HDFS</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ sudo -u oozie hdfs dfs -put /etc/gphd/hive/conf/hive-site.xml /user/oozie/hive-oozie-site.xml</pre>
</div></div> <div class="aui-message warning shadowed information-macro">
<span class="aui-icon icon-warning">Icon</span>
<div class="message-content">
<p>When uploading a Hive configuration file to HDFS, do not use<code> hive-site.xml</code> as the file name. This is because Hive action in Oozie overwrites the <code>hive-site.xml</code> file.</p><p>In the Oozie workflow file, use <code>&lt;job-xml&gt;${nameNode}/user/oozie/hive-oozie-site.xml&lt;/job-xml&gt;</code> to refer to the Hive configuration file.</p>
</div>
</div>
</li><li><p>Submit workflow:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ oozie job -oozie http://localhost:11000/oozie -config examples/apps/hive/job.properties  -run
job: &lt;oozie-job-id&gt;</pre>
</div></div></li><li><p>Check workflow status.</p><p>Where <code>&lt;oozie-job-id&gt;</code> is the same id in the output of last command.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ oozie job -oozie http://localhost:11000/oozie -info &lt;oozie-job-id&gt;</pre>
</div></div></li></ol></li><li>Submit a Pig example workflow.<ol><li><p>Submit workflow:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ oozie job -oozie http://localhost:11000/oozie -config examples/apps/pig/job.properties  -run
job: &lt;oozie-job-id&gt;</pre>
</div></div></li><li><p>Check the workflow status.</p><p>Where <code>&lt;oozie-job-id&gt;</code> is the same id in the output of the last command.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ oozie job -oozie http://localhost:11000/oozie -info &lt;oozie-job-id&gt;</pre>
</div></div></li></ol></li></ol><h2 id="RunningPHDSamplePrograms-TestingSqoop">Testing Sqoop</h2><h3 id="RunningPHDSamplePrograms-SqoopClientExample">Sqoop ClientExample</h3><p>In this example, you are using sqoop to import a MySQL database table into HDFS.</p><p>To run this example, in addition to a correctly installed and configured PHD, you also need:</p><ol><li><p>Install and run MySQL instance.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo yum -y install mysql
$ sudo service mysqld start</pre>
</div></div></li><li><p>Install MySQL official JDBC driver and copy<code>mysql-connector-java.jar</code>into<code>/usr/lib/gphd/sqoop/lib.</code></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo yum -y install mysql-connector-java
$ sudo cp /usr/share/java/mysql-connector-java.jar /usr/lib/gphd/sqoop/lib</pre>
</div></div></li><li>Create MySQL database test and MySQL table student.</li></ol><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ mysql
mysql&gt; use test;
mysql&gt; CREATE TABLE student (id INT PRIMARY KEY, name VARCHAR(100));
mysql&gt; insert into student (id, name) values (1, "John");
mysql&gt; insert into student (id, name) values (2, "Mike");
mysql&gt; insert into student (id, name) values (3, "Tom");
mysql&gt; exit</pre>
</div></div><p>Then run sqoop to import the table to HDFS:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo -u hdfs hdfs dfs -mkdir -p /tmp
$ sudo -u hdfs hdfs dfs -chmod 777 /tmp
$ sqoop import --connect jdbc:mysql://&lt;mysql server host&gt;/test --table student --username &lt;username&gt; --target-dir hdfs://&lt;namenode host&gt;/tmp/sqoop_output</pre>
</div></div><p>Where:</p><p style="margin-left: 30.0px;"><code>&lt;mysql server host&gt;</code> is the host name on which your MySQL instance is running</p><p style="margin-left: 30.0px;"><code>&lt;username&gt;</code> is the user name of the user running this command</p><p style="margin-left: 30.0px;"><code>&lt;namenode host&gt;</code> is the host name on which your name node is running.</p><h2 id="RunningPHDSamplePrograms-TestingFlume">Testing Flume</h2><h3 id="RunningPHDSamplePrograms-FlumeConfigurationExample">Flume Configuration Example</h3><p></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cat /etc/gphd/flume/conf/flume.conf 
agent.sources = r1
agent.sinks = k1
agent.channels = c1

# Describe/configure the source
agent.sources.r1.type = netcat
agent.sources.r1.bind = localhost
agent.sources.r1.port = 44444

# Describe the sink
agent.sinks.k1.type = hdfs
agent.sinks.k1.hdfs.path = hdfs://localhost/user/flume/
agent.sinks.k1.hdfs.fileType = DataStream

# Use a channel which buffers events in memory
agent.channels.c1.type = memory
agent.channels.c1.capacity = 1000
agent.channels.c1.transactionCapacity = 100

# Bind the source and sink to the channel
agent.sources.r1.channels = c1
agent.sinks.k1.channel = c1</pre>
</div></div><h3 id="RunningPHDSamplePrograms-Starting/StoppingFlume">Starting/Stopping Flume</h3><p><strong>Option 1) Using flume-ng command</strong></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo flume-ng agent -c &lt;config-dir&gt; -f &lt;config-file&gt; -n &lt;agent-name&gt;

Example:
sudo flume-ng agent -c /etc/gphd/flume/conf -f /etc/gphd/flume/conf/flume.conf -n agent</pre>
</div></div><p><strong>Option 2) Using service commands</strong></p><p>Start/stop the Flume agent by running the following commands:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo service flume-agent start
$ sudo service flume-agent stop
$ sudo service flume-agent status</pre>
</div></div><h3 id="RunningPHDSamplePrograms-VerifyingtheInstallation">Verifying the Installation</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo service flume-agent stop
$ sudo -u hdfs hdfs dfs -mkdir -p /user/flume
$ sudo -u hdfs hdfs dfs -chmod 777 /user/flume
$ sudo service flume-agent start
$ echo hello | nc localhost 44444; sleep 30; sudo -u hdfs hdfs dfs -cat /user/flume/*
OK
hello</pre>
</div></div><p></p><h2 id="RunningPHDSamplePrograms-TestingMahout">Testing Mahout</h2><p>To test if mahout job is running.</p><p>Create a sample text file and put it on hdfs. Then run mahout cat job</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">hadoop fs -put test_mahout /tmp
(test_mahout is a sample text file)
[gpadmin@centos64-2 ~]$ /usr/bin/mahout cat test_mahout
MAHOUT_LOCAL is not set; adding HADOOP_CONF_DIR to classpath.
Running on hadoop, using /usr/lib/gphd/hadoop/bin/hadoop and HADOOP_CONF_DIR=/etc/gphd/hadoop/conf
MAHOUT-JOB: /usr/lib/gphd/mahout/mahout-examples-0.7-gphd-3.1.0.0-job.jar
Sample mahout test file
14/07/25 11:10:41 INFO driver.MahoutDriver: Program took 6 ms (Minutes: 1.1666666666666667E-4)</pre>
</div></div><h2 id="RunningPHDSamplePrograms-TestingPXF">Testing PXF</h2><h3 id="RunningPHDSamplePrograms-TestingPXFonHive">Testing PXF on Hive</h3><p>Make sure you created a 'passwords' table on Hive, which is described in "Testing Hive" section.</p><p>Go to the HAWQ master node:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">su - gpadmin
source /usr/lib/gphd/hawq/greenplum_path.sh
psql -p 5432
# gpadmin=# CREATE EXTERNAL TABLE passwords (username text, password text, userId text, groupId text, gecos text, home text, shell text) LOCATION('pxf://&lt;namenode_host&gt;:50070/passwords?FRAGMENTER=HiveDataFragmenter&amp;ACCESSOR=HiveAccessor&amp;RESOLVER=HiveResolver') format 'custom' (formatter='pxfwritable_import'); ## This is old format.
gpadmin=# CREATE EXTERNAL TABLE passwords (username text, password text, userId text, groupId text, gecos text, home text, shell text) LOCATION('pxf://{nameservices}/passwords?Profile=hive') format 'custom' (formatter='pxfwritable_import');
gpadmin=# \d
           List of relations
 Schema |   Name    | Type  |  Owner
--------+-----------+-------+---------
 public | passwords | table | gpadmin
 public | test      | table | gpadmin
(2 rows)

gpadmin=# select * from passwords;

</pre>
</div></div><h3 id="RunningPHDSamplePrograms-TestingPXFonHBase">Testing PXF on HBase</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># a text file has some data
cat hbase-data.txt
create 'hbasestudent', 'rollnum', 'name', 'std'
put 'hbasestudent', 'row1', 'rollnum', '1'
put 'hbasestudent', 'row1', 'name', 'A'
put 'hbasestudent', 'row1', 'std', '3'
put 'hbasestudent', 'row2', 'rollnum', '2'
put 'hbasestudent', 'row2', 'name', 'B'
put 'hbasestudent', 'row2', 'std', '1'
put 'hbasestudent', 'row3', 'rollnum', '3'
put 'hbasestudent', 'row3', 'name', 'C'
put 'hbasestudent', 'row3', 'std', '5'

# Execute it
hbase shell &lt; hbase-data.txt

# in hbase shell, make sure there is the data
scan 'hbasestudent'

su - gpadmin
source /usr/lib/gphd/hawq/greenplum_path.sh
psql -p 5432

#CREATE EXTERNAL TABLE student (recordkey TEXT, "rollnum:" TEXT,  "name:" TEXT ,  "std:" TEXT) LOCATION ('pxf://    &lt;namenodehost&gt;:50070/hbasestudent?FRAGMENTER=HBaseDataFragmenter&amp;ACCESSOR=HBaseAccessor&amp;RESOLVER=HBaseResolver'    ) FORMAT 'CUSTOM' (FORMATTER='pxfwritable_import');

For HA cluster
CREATE EXTERNAL TABLE student(recordkey TEXT, "rollnum:" TEXT,  "name:" TEXT ,  "std:" TEXT) LOCATION ('pxf://{nameservices}/hbasestudent?Profile=HBase') FORMAT 'CUSTOM' (FORMATTER='pxfwritable_import');

select * from  student;</pre>
</div></div><h3 id="RunningPHDSamplePrograms-TestingPXFonHDFS">Testing PXF on HDFS</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">cat ranking.txt
Talk Dirty,Jason Derulo,4
All Of Me,John Legend,2
Let It Go,Idina Menzel,5
Happy,Pharrell Williams,1
Dark Horse,Katy Perry,3

hadoop fs -copyFromLocal ranking.txt /tmp

su - gpadmin
source /usr/lib/gphd/hawq/greenplum_path.sh
psql -p 5432


# CREATE EXTERNAL TABLE ranking (song text , artist text, rank int) LOCATION ('pxf://&lt;namenodehost&gt;:50070/tmp/ranking.txt?Fragmenter=HdfsDataFragmenter&amp;ACCESSOR=TextFileAccessor&amp;RESOLVER=TextResolver') FORMAT 'TEXT' (DELIMITER = ','); # This is an old way


CREATE EXTERNAL TABLE ranking (song text , artist text, rank int) LOCATION ('pxf://&lt;nameservices&gt;/tmp/ranking.txt?PROFILE=HdfsTextSimple') FORMAT 'TEXT' (DELIMITER = ',');
# or if you cluster is non-HA
CREATE EXTERNAL TABLE ranking (song text , artist text, rank int) LOCATION ('pxf://&lt;namenodehost&gt;:50070/tmp/ranking.txt?PROFILE=HdfsTextSimple') FORMAT 'TEXT' (DELIMITER = ',');


select * from ranking order by rank;</pre>
</div></div>
</div>
		
		</main><!--end of content-->

  </div><!-- end of container -->

  <script type="text/javascript">
    (function() {
      var didInit = false;
      function initMunchkin() {
        if(didInit === false) {
          didInit = true;
          Munchkin.init('625-IUJ-009');
        }
      }
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
      s.onreadystatechange = function() {
        if (this.readyState == 'complete' || this.readyState == 'loaded') {
          initMunchkin();
        }
      };
      s.onload = initMunchkin;
      document.getElementsByTagName('head')[0].appendChild(s);
    })();
  </script>
</div><!--end of wrap-->
</div><!--end of viewport-->

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href='/'>Pivotal Documentation</a>
      &copy; 2014 <a href='http://pivotal.io'>Pivotal Software</a> Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit support</a>
  </footer>
</div><!--end of container-->

</body>
</html>


            
      
      
      
      